
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>aglyph.component — Defining components and their dependencies &#8212; Aglyph 3.0.0.post1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="aglyph.context — Defining component contexts" href="aglyph.context.html" />
    <link rel="prev" title="aglyph.assembler — The Aglyph component assembler" href="aglyph.assembler.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="aglyph-component-defining-components-and-their-dependencies">
<h1><a class="reference internal" href="#module-aglyph.component" title="aglyph.component"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aglyph.component</span></code></a> — Defining components and their dependencies<a class="headerlink" href="#aglyph-component-defining-components-and-their-dependencies" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">3.0.0.post1</td>
</tr>
</tbody>
</table>
<span class="target" id="module-aglyph.component"></span><p>The classes in this module are used to define components and their
dependencies within an Aglyph context (<a class="reference internal" href="aglyph.context.html#aglyph.context.Context" title="aglyph.context.Context"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.context.Context</span></code></a>).</p>
<p class="rubric">Components and Templates</p>
<p><a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Component</span></code></a> tells an
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler</span></code></a> how to create objects of a
particular type. The component defines the initialization and/or
attribute dependencies for objects of that type, as well as the assembly
strategy and any lifecycle methods that should be called.</p>
<p><a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Template</span></code></a> is used to describe dependencies
(initialization and/or attribute) and lifecylce methods that are shared
by multiple components. Templates are similar to abstract classes; they
cannot be assembled, but are instead used as “parents” of other
components (or templates) to achieve a sort of “configuration
inheritance.”</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both <code class="docutils literal notranslate"><span class="pre">Component</span></code> and <code class="docutils literal notranslate"><span class="pre">Template</span></code> may serve as the parent of any
other component or template; but only components may be assembled.</p>
</div>
<p class="rubric">References and Evaluators</p>
<p>A <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Reference</span></code></a> may be used as the value of any
initialization argument (positional or keyword) or attribute in a
component or template. Its value must be the unique ID of a
<strong>component</strong> in the same context. At assembly time, the assembler will
resolve the reference into an object of the component to which it
refers.</p>
<p>An <a class="reference internal" href="#aglyph.component.Evaluator" title="aglyph.component.Evaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Evaluator</span></code></a> is similar to a
<a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> object. It stores a callable factory (function
or class) and related initialization arguments, and can be called
repeatedly to produce new objects. (Unlike a <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>
object, though, an <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> will resolve any initialization
argument that is a <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Reference</span></code></a>,
<a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>, or <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> <strong>before</strong> calling the
factory.)</p>
<p class="rubric">Strategies and Lifecycle methods</p>
<p><a class="reference internal" href="#aglyph.component.Strategy" title="aglyph.component.Strategy"><code class="xref py py-data docutils literal notranslate"><span class="pre">aglyph.component.Strategy</span></code></a> defines the assembly strategies
supported by Aglyph (<em>“prototype”</em>, <em>“singleton”</em>, <em>“borg”</em>,
<em>“weakref”</em> and <em>“_imported”</em>).</p>
<p><a class="reference internal" href="#aglyph.component.LifecycleState" title="aglyph.component.LifecycleState"><code class="xref py py-data docutils literal notranslate"><span class="pre">LifecycleState</span></code></a> defines assmebly states for components at
which Aglyph supports calling named methods on the objects of those
components. (Such methods may be used to perform specialized
initialization or disposal, for example.)</p>
<dl class="data">
<dt id="aglyph.component.Strategy">
<code class="descclassname">aglyph.component.</code><code class="descname">Strategy</code><em class="property"> = Strategy(PROTOTYPE='prototype', SINGLETON='singleton', BORG='borg', WEAKREF='weakref')</em><a class="headerlink" href="#aglyph.component.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the component assembly strategies implemented by Aglyph.</p>
<p class="rubric">“prototype”</p>
<p>A new object is always created, initialized, wired, and returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">“prototype” is the default assembly strategy for Aglyph components
that do not specify a member name.</p>
</div>
<p class="rubric">“singleton”</p>
<p>The cached object is returned if it exists. Otherwise, the object is
created, initialized, wired, cached, and returned.</p>
<p>Singleton component objects are cached by <code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.unique_id</span></code>.</p>
<p class="rubric">“borg”</p>
<p>A new instance is always created. The shared-state is assigned to the
new instance’s <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> if it exists. Otherwise, the new instance is
initialized and wired, its instance <code class="docutils literal notranslate"><span class="pre">__dict__</span></code> is cached, and then the
instance is returned.</p>
<p>Borg component instance shared-states are cached by
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.unique_id</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>The borg assembly strategy is <strong>only</strong> supported for
components that are non-builtin classes.</li>
<li>The borg assembly strategy is <strong>not</strong> supported for
classes that define or inherit a <code class="docutils literal notranslate"><span class="pre">__slots__</span></code> member.</li>
</ul>
</div>
<p class="rubric">“weakref”</p>
<p>In the simplest terms, this is a “prototype” that can exhibit
“singleton” behavior: as long as there is at least one “live” reference
to the assembled object in the application runtime, then requests to
assemble this component will return the same (cached) object.</p>
<p>When the only reference to the assembled object that remains is the
cached weak reference, the Python garbage collector is free to destroy
the object, at which point it is automatically removed from the Aglyph
cache.</p>
<p>Subsequent requests to assemble the same component will cause a new
object to be created, initialized, wired, cached (as a weak reference),
and returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to the <a class="reference external" href="https://docs.python.org/3/library/weakref.html#module-weakref" title="(in Python v3.7)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">weakref</span></code></a> module for a detailed explanation
of weak reference behavior.</p>
</div>
<p class="rubric">“_imported”</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.0.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The “_imported” strategy is only valid (and is the only allowed
value) when <em>member_name</em> is specified for a component.</p>
<p class="last">Since this strategy is implicitly assigned and is intended for
internal use by Aglyph itself, it is not exposed on the
<code class="docutils literal notranslate"><span class="pre">Strategy</span></code> named tuple.</p>
</div>
<p>An already-created (loaded) object is obtained from an imported module
or class (as opposed to creating the object directly).
Such components will always resolve (i.e. be assembled) to the same
objects; but those objects are not cached by Aglyph as they will
exhibit “natural” singleton behavior so long as the containing module
is referenced in <code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.modules</span></code>.</p>
<p>It is not necessary to explicitly set the strategy to “_imported” when
using <em>member_name</em> - Aglyph will default to “_imported” when it sees
a non-empty <em>member_name</em> defined.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Explicitly setting strategy=”_imported” <strong>without</strong> specifying
<em>member_name</em> will raise <code class="xref py py-exc docutils literal notranslate"><span class="pre">AglyphError</span></code>.</p>
<p class="last">Specifying <em>member_name</em> with any explicit strategy other than
“_imported” will ignore the explicit strategy, change it to
“_imported” internally, and issue a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a> to that
effect.</p>
</div>
</dd></dl>

<dl class="data">
<dt id="aglyph.component.LifecycleState">
<code class="descclassname">aglyph.component.</code><code class="descname">LifecycleState</code><em class="property"> = LifecycleState(AFTER_INJECT='after_inject', BEFORE_CLEAR='before_clear')</em><a class="headerlink" href="#aglyph.component.LifecycleState" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the lifecycle states for which Aglyph will call object methods
on your behalf.</p>
<p class="rubric" id="lifecycle-methods">Lifecycle methods</p>
<p>Lifecycle methods are called with <strong>no arguments</strong> (positional or
keyword).</p>
<p>If a called lifecycle method raises an exception, the exception is
caught, logged at <code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.ERROR</span></code> level (including a traceback) to
the “aglyph.assembler.Assembler” channel, and a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeWarning</span></code></a>
is issued.</p>
<p>A method may be registered for a lifecycle state by specifying the
method name at the context (least specific), template, and/or component
(most specific) level.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Aglyph only calls <strong>one</strong> method on an object for any lifecycle
state. Refer to <strong>The lifecycle method lookup process</strong> (below) for
details.</p>
</div>
<p>Aglyph recognizes the following lifecycle states:</p>
<p class="rubric">“after_inject”</p>
<p>A component object is in this state after <strong>all</strong> dependencies (both
initialization arguments and attributes) have been injected into a
newly-created instance, but before the object is cached and/or returned
to the caller.</p>
<p>Aglyph will only call <strong>one</strong> “after_inject” method on any object, and
will determine which method to call by using the lookup process
described below.</p>
<p class="rubric">“before_clear”</p>
<p>A component object is in this state after is has been removed from an
internal cache (singleton, borg, or weakref), but before the object
itself is actually discarded.</p>
<p>Aglyph will only call <strong>one</strong> “before_clear” method on any object, and
will determine which method to call by using the lookup process
described below.</p>
<p class="rubric" id="lifecycle-method-lookup-process">The lifecycle method lookup process</p>
<p>Lifecyle methods may be specified at the context (least specific),
template, and component (most specific) levels.</p>
<p>In order to determine which named method is called for a particular
object, Aglyph looks up the appropriate lifecycle method name in the
following order, using the <strong>first</strong> one found that is not <code class="docutils literal notranslate"><span class="pre">None</span></code>
<em>and</em> is actually defined on the object:</p>
<ol class="arabic simple">
<li>The method named by the object’s <code class="docutils literal notranslate"><span class="pre">Component.&lt;lifecycle-state&gt;</span></code>
property.</li>
<li>If the object’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.parent_id</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the
method named by the corresponding parent
<code class="docutils literal notranslate"><span class="pre">Template.&lt;lifecycle-state&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">Component.&lt;lifecycle-state&gt;</span></code>
property. (If necessary, lookup continues by examining the
parent-of-the-parent and so on.)</li>
<li>The method named by the <code class="docutils literal notranslate"><span class="pre">Context.&lt;lifecycle-state&gt;</span></code> property.</li>
</ol>
<p>When Aglyph finds a named lifecycle method that applies to an object,
but the object itself does not define that method, a
<code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.WARNING</span></code> message is emitted.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Either a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> or <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Template</span></code></a> may serve as the
parent identified by a <code class="docutils literal notranslate"><span class="pre">parent_id</span></code>.</p>
<p class="last">However, only a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> may actually be assembled into
a usable object. (A <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Template</span></code></a> is like an abstract class -
it defines common dependencies and/or lifecycle methods, but it
cannot be assembled.)</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aglyph.component.Reference">
<em class="property">class </em><code class="descclassname">aglyph.component.</code><code class="descname">Reference</code><a class="reference internal" href="_modules/aglyph/component.html#Reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
<p>A placeholder used to refer to another <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Reference</span></code> is used as an alias to identify a component that is
a dependency of another component. The value of a <code class="docutils literal notranslate"><span class="pre">Reference</span></code> can
be either a dotted-name or a user-provided unique ID.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Reference</span></code> can be used as an argument for an
<a class="reference internal" href="#aglyph.component.Evaluator" title="aglyph.component.Evaluator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Evaluator</span></code></a>, and can be assembled directly by an
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler</span></code></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A <code class="docutils literal notranslate"><span class="pre">Reference</span></code> value MUST correspond to a component ID in the
same context.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In Python versions &lt; 3.0, a <code class="docutils literal notranslate"><span class="pre">Reference</span></code> representing a
dotted-name <em>must</em> consist only of characters in the ASCII
subset of the source encoding (see <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0263"><strong>PEP 0263</strong></a>).</p>
<p>But in Python versions &gt;= 3.0, a <code class="docutils literal notranslate"><span class="pre">Reference</span></code> representing a
dotted-name <em>may</em> contain non-ASCII characters
(see <span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3131"><strong>PEP 3131</strong></a>).</p>
<p class="last">However, a <code class="docutils literal notranslate"><span class="pre">Reference</span></code> may also represent a user-defined
identifier. To accommodate all cases, the super class of
<code class="docutils literal notranslate"><span class="pre">Reference</span></code> is “dynamic” with respect to the version of Python
under which Aglyph is running (<code class="xref py py-class docutils literal notranslate"><span class="pre">unicode</span></code> under Python 2,
<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> under Python 3). This documentation shows the base
class as <code class="docutils literal notranslate"><span class="pre">str</span></code> because the <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>
documentation generator for Aglyph runs under CPython 3.</p>
</div>
<p>Create a new reference to <em>referent</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>referent</strong> – the object that the reference will represent</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="aglyph.html#aglyph.AglyphError" title="aglyph.AglyphError"><strong>aglyph.AglyphError</strong></a> – if <em>referent</em> is a class, function, or module but cannot be
imported</td>
</tr>
</tbody>
</table>
<p>If <em>referent</em> is a string, it is assumed to be a valid
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.unique_id</span></code> and its value is returned as a
<code class="docutils literal notranslate"><span class="pre">Reference</span></code>.</p>
<p>If <em>referent</em> is a class, function, or module, its
<strong>importable</strong> dotted name is returned as a <code class="docutils literal notranslate"><span class="pre">Reference</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If <em>referent</em> is a class, function, or module, it <strong>must</strong>
be importable.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aglyph.component.Evaluator">
<em class="property">class </em><code class="descclassname">aglyph.component.</code><code class="descname">Evaluator</code><span class="sig-paren">(</span><em>factory</em>, <em>*args</em>, <em>**keywords</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aglyph/component.html#Evaluator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Evaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component._InitializationSupport</span></code></p>
<p>Perform lazy creation of objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>factory</strong> – any callable that returns an object</li>
<li><strong>args</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><em>tuple</em></a>) – the positional arguments to <em>func</em></li>
<li><strong>keywords</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – the keyword arguments to <em>func</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>An <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> is similar to a <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> in
that they both collect a function and related arguments into a
<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code></a> object with a simplified signature that can be
called repeatedly to produce a new object.</p>
<p><em>Unlike</em> a partial function, an <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> may have arguments
that are not truly “frozen,” in the sense that any argument may
be defined as a <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reference</span></code></a>, a <a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>,
or even another <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code>, which needs to be resolved (i.e.
assembled/called) before calling <em>factory</em>.</p>
<p>When an <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> is called, its arguments (positional and
keyword) are each resolved in one of the following ways:</p>
<ul class="simple">
<li>If the argument value is a <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reference</span></code></a>, it is assembled
(by an <a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler</span></code></a> reference passed to
<a class="reference internal" href="#aglyph.component.Evaluator.__call__" title="aglyph.component.Evaluator.__call__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code></a>)</li>
<li>If the argument value is an <code class="docutils literal notranslate"><span class="pre">Evaluator</span></code> or a
<a class="reference external" href="https://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a>, it is called to produce its value.</li>
<li>If the argument is a dictionary or a sequence other than a
string type, each item is resolved according to these rules.</li>
<li>If none of the above cases apply, the argument value is used
as-is.</li>
</ul>
<dl class="attribute">
<dt id="aglyph.component.Evaluator.factory">
<code class="descname">factory</code><a class="headerlink" href="#aglyph.component.Evaluator.factory" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code></a> that creates new objects <em>(read-only)</em>.</p>
</dd></dl>

<dl class="method">
<dt id="aglyph.component.Evaluator.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>assembler</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aglyph/component.html#Evaluator.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Evaluator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <code class="docutils literal notranslate"><span class="pre">factory(*args,</span> <span class="pre">**keywords)</span></code> and return the new object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>assembler</strong> (<em>aglyph.assembly.Assembler</em>) – the assembler that will be used to assemble any
<a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reference</span></code></a> encountered in this evaluator’s positional
and keyword arguments</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aglyph.component.Template">
<em class="property">class </em><code class="descclassname">aglyph.component.</code><code class="descname">Template</code><span class="sig-paren">(</span><em>unique_id</em>, <em>parent_id=None</em>, <em>after_inject=None</em>, <em>before_clear=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aglyph/component.html#Template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component._DependencySupport</span></code></p>
<p>Support for configuring type 1 (setter) and type 2 (constructor)
injection, and lifecycle methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>unique_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – context-unique identifier for this template</li>
<li><strong>parent_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the ID of a template or component that describes
the default dependencies and/or lifecyle methods for this
template</li>
<li><strong>after_inject</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the name of the method that will be called on
objects of components that reference this template after all
component dependencies have been injected</li>
<li><strong>before_clear</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the name of the method that will be called on
objects of components that reference this template
immediately before they are cleared from cache</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – if <em>unique_id</em> is <code class="docutils literal notranslate"><span class="pre">None</span></code> or empty</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A <code class="docutils literal notranslate"><span class="pre">Template</span></code> cannot be assembled (it is equivalent to an
abstract class).</p>
<p class="last">However, a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> can also serve as a template,
so if you need the ability to assemble an object <em>and</em> use
its definition as the basis for other components, then define
the default dependencies and/or lifecycle methods in a
<a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> and use that component’s ID as the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.parent_id</span></code> in other components.</p>
</div>
<p><em>unique_id</em> must be a user-provided identifier that is unique
within the context to which this template is added. A component
may then be instructed to use a template by specifying the same
value for <code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.parent_id</span></code>.</p>
<p><em>parent_id</em> is <strong>another</strong> <code class="xref py py-attr docutils literal notranslate"><span class="pre">Component.unique_id</span></code> or
<a class="reference internal" href="#aglyph.component.Template.unique_id" title="aglyph.component.Template.unique_id"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Template.unique_id</span></code></a> in the same context that descibes
<strong>this</strong> template’s default dependencies and/or lifecycle
methods.</p>
<p><em>after_inject</em> is the name of a method <em>of objects of this
component</em> that will be called after <strong>all</strong> dependencies have
been injected, but before the object is returned to the caller.
This method will be called with <strong>no</strong> arguments (positional or
keyword). Exceptions raised by this method are not caught.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Template.after_inject</span></code> takes precedence over any
<em>after_inject</em> method name specified for the template’s
parent or context.</p>
</div>
<p><em>before_clear</em> is the name of a method <em>of objects of this
component</em> that will be called immediately before the object is
cleared from cache via
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></code></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></code></a>, or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Template.before_clear</span></code> takes precedence over any
<em>before_clear</em> method name specified for the template’s
parent or context.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The <em>before_clear</em> keyword argument has no meaning for and is
ignored by “prototype” components. If <em>before_clear</em> is
specified for a prototype, a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeWarning</span></code></a> will be
issued.</p>
<p class="last">For “weakref” components, there is a possibility that the
object no longer exists at the moment when the <em>before_clear</em>
method would be called. In such cases, the <em>before_clear</em>
method is <strong>not</strong> called. No warning is issued, but a
<code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.WARNING</span></code> message is emitted.</p>
</div>
<dl class="attribute">
<dt id="aglyph.component.Template.unique_id">
<code class="descname">unique_id</code><a class="headerlink" href="#aglyph.component.Template.unique_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Uniquely identifies this template in a context <em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.parent_id">
<code class="descname">parent_id</code><a class="headerlink" href="#aglyph.component.Template.parent_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies this template’s parent template or component
<em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.after_inject">
<code class="descname">after_inject</code><a class="headerlink" href="#aglyph.component.Template.after_inject" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the component object method that will be called
after <strong>all</strong> dependencies have been injected <em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.before_clear">
<code class="descname">before_clear</code><a class="headerlink" href="#aglyph.component.Template.before_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the component object method that will be called
immediately before the object is cleared from cache
<em>(read-only)</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This property is not applicable to “prototype” component
objects, and is <strong>not guaranteed</strong> to be called for “weakref”
component objects.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aglyph.component.Component">
<em class="property">class </em><code class="descclassname">aglyph.component.</code><code class="descname">Component</code><span class="sig-paren">(</span><em>component_id</em>, <em>dotted_name=None</em>, <em>factory_name=None</em>, <em>member_name=None</em>, <em>strategy=None</em>, <em>parent_id=None</em>, <em>after_inject=None</em>, <em>before_clear=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aglyph/component.html#Component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Template</span></code></a></p>
<p>Define a component and the dependencies needed to create a new
object of that component at runtime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>component_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the context-unique identifier for this component</li>
<li><strong>dotted_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – an <strong>importable</strong> dotted name</li>
<li><strong>factory_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – names a <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code></a> member of objects of this component</li>
<li><strong>member_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – names <strong>any</strong> member of objects of this component</li>
<li><strong>strategy</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the component assembly strategy</li>
<li><strong>parent_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the ID of a template or component that describes
the default dependencies and/or lifecyle methods for this
component</li>
<li><strong>after_inject</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the name of the method that will be called on
objects of this component after all of its dependencies have
been injected</li>
<li><strong>before_clear</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – specifies the name of the method that will be called on
objects of this component immediately before they are cleared
from cache</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="aglyph.html#aglyph.AglyphError" title="aglyph.AglyphError"><strong>aglyph.AglyphError</strong></a> – if both <em>factory_name</em> and <em>member_name</em> are specified</li>
<li><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.7)"><strong>ValueError</strong></a> – if <em>strategy</em> is not a recognized assembly strategy</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><em>component_id</em> must be a user-provided identifier that is unique
within the context to which this component is added. An
<strong>importable</strong> dotted name may be used (see
<a class="reference internal" href="aglyph.html#aglyph.resolve_dotted_name" title="aglyph.resolve_dotted_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">aglyph.resolve_dotted_name()</span></code></a>).</p>
<p><em>dotted_name</em>, if provided, must be an <strong>importable</strong> dotted
name (see <a class="reference internal" href="aglyph.html#aglyph.resolve_dotted_name" title="aglyph.resolve_dotted_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">aglyph.resolve_dotted_name()</span></code></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <em>dotted_name</em> is not specified, then <em>component_id</em> is
used as the component’s dotted name and <strong>must</strong> be an
importable dotted name.</p>
</div>
<p><em>factory_name</em> is the name of a <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code></a> member of
<em>dotted-name</em> (i.e. a function, class, staticmethod, or
classmethod). When provided, the assembler will call this member
to create an object of this component.</p>
<p><em>factory_name</em> enables Aglyph to inject dependencies into
objects that can only be initialized via nested classes,
<a class="reference external" href="https://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">staticmethod</span></code></a>, or <a class="reference external" href="https://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">classmethod</span></code></a>. See
<a class="reference internal" href="#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">factory_name</span></code></a> for details.</p>
<p><em>member_name</em> is the name of a member of <em>dotted-name</em>, which
<strong>may or may not</strong> be callable.</p>
<p><em>member_name</em> differs from <em>factory_name</em> in two ways:</p>
<ol class="arabic simple">
<li><em>member_name</em> is not restricted to callable members; it may
identify <strong>any</strong> member (attribute, property, nested class).</li>
<li>When an assembler assembles a component with a
<em>member_name</em>, initialization of the object is <em>bypassed</em>
(i.e. the assembler will not call the member, and any
initialization arguments defined for the component will be
<strong>ignored</strong>).</li>
</ol>
<p><em>member_name</em> enables Aglyph to reference class, function,
<a class="reference external" href="https://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">staticmethod</span></code></a>, and <a class="reference external" href="https://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">classmethod</span></code></a> obejcts, as well as
simple attributes or properties, as components and dependencies.
See <a class="reference internal" href="#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">member_name</span></code></a> for details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both <em>factory_name</em> and <em>member_name</em> can be dot-separated
names to reference nested members.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <em>factory_name</em> and <em>member_name</em> arguments are mutually
exclusive. An exception is raised if both are provided.</p>
</div>
<p><em>strategy</em> must be a recognized component assembly strategy, and
defaults to <code class="docutils literal notranslate"><span class="pre">Strategy.PROTOTYPE</span></code> (<em>“prototype”</em>) if not
specified.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.0: </span>When <a class="reference internal" href="#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">member_name</span></code></a> is specified, the strategy <strong>must</strong>
be <em>“_imported”</em>. Aglyph will use the “_imported” strategy
automatically for components that specify <em>member_name</em>;
setting strategy to anything other than “_imported” when
specifying <em>member_name</em> will issue <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a>.</p>
</div>
<p>Please see <a class="reference internal" href="#aglyph.component.Strategy" title="aglyph.component.Strategy"><code class="xref py py-data docutils literal notranslate"><span class="pre">Strategy</span></code></a> for a description of the component
assembly strategies supported by Aglyph.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">Strategy.BORG</span></code> (<em>“borg”</em>) component assembly strategy
is only supported for classes that <strong>do not</strong> define or
inherit <code class="docutils literal notranslate"><span class="pre">__slots__</span></code>!</p>
</div>
<p><em>parent_id</em> is the context-unique ID of a <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">Template</span></code></a> (or
another <code class="docutils literal notranslate"><span class="pre">Component</span></code>) that defines default dependencies and/or
lifecycle methods for this component.</p>
<p><em>after_inject</em> is the name of a method <em>of objects of this
component</em> that will be called after <strong>all</strong> dependencies have
been injected, but before the object is returned to the caller.
This method will be called with <strong>no</strong> arguments (positional or
keyword). Exceptions raised by this method are not caught.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Component.after_inject</span></code> takes precedence over any
<em>after_inject</em> method names specified for the component’s
parent or context.</p>
</div>
<p><em>before_clear</em> is the name of a method <em>of objects of this
component</em> that will be called immediately before the object is
cleared from cache via
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></code></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></code></a>, or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></code></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">Component.before_clear</span></code> takes precedence over any
<em>before_clear</em> method names specified for the component’s
parent or context.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <em>before_clear</em> keyword argument has no meaning for, and
is ignored by, “prototype” components. If <em>before_clear</em> is
specified for a prototype component, a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UserWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">UserWarning</span></code></a>
is issued <strong>when the component is defined</strong>, and the
component’s <code class="xref py py-attr docutils literal notranslate"><span class="pre">before_clear</span></code> attribute is set to
<code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For “weakref” components, there is a possibility that the
object no longer exists at the moment when the <em>before_clear</em>
method would be called. In such cases, the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.clear_weakrefs()</span></code> method will issue a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">RuntimeWarning</span></code></a> (see that method’s documentation for
more details).</p>
</div>
<p>Once a <code class="docutils literal notranslate"><span class="pre">Component</span></code> instance is initialized, the <code class="docutils literal notranslate"><span class="pre">args</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a>), <code class="docutils literal notranslate"><span class="pre">keywords</span></code> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>), and <code class="docutils literal notranslate"><span class="pre">attributes</span></code>
(<a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a>) members can be modified
in-place to define the dependencies that must be injected into
objects of this component at assembly time. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s2">&quot;http.client.HTTPConnection&quot;</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;ninthtest.info&quot;</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">keywords</span><span class="p">[</span><span class="s2">&quot;strict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">component</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s2">&quot;set_debuglevel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>In Aglyph, a component may:</p>
<ul class="simple">
<li>be assembled directly by an
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler</span></code></a></li>
<li>identify other components as dependencies (using a
<a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reference</span></code></a>)</li>
<li>be used by other components as a dependency</li>
<li>use common dependencies and behaviors (<em>after_inject</em>,
<em>before_clear</em>) defined in a
<a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.component.Template</span></code></a></li>
<li>use any combination of the above behaviors</li>
</ul>
<dl class="attribute">
<dt id="aglyph.component.Component.dotted_name">
<code class="descname">dotted_name</code><a class="headerlink" href="#aglyph.component.Component.dotted_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The importable dotted name for objects of this component
<em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.factory_name">
<code class="descname">factory_name</code><a class="headerlink" href="#aglyph.component.Component.factory_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a <a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">callable</span></code></a> member of <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dotted_name</span></code></a>
<em>(read-only)</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">factory_name</span></code> can be used to initialize objects of the
component when a class is not directly importable (e.g. the
component class is a nested class), or when component objects
need to be initialized via <a class="reference external" href="https://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">staticmethod</span></code></a> or
<a class="reference external" href="https://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">classmethod</span></code></a>.</p>
<p>Consider the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># module.py</span>
<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The dotted name “module.Example.Nested” is not importable, and
so cannot be used as a component’s <code class="docutils literal notranslate"><span class="pre">unique_id</span></code> or
<code class="docutils literal notranslate"><span class="pre">dotted_name</span></code>. To assemble objects of this type, use
<code class="docutils literal notranslate"><span class="pre">factory_name</span></code> to identify the callable factory (the Nested
class, in this example) that is accessible through the
importable “module.Example”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span>
    <span class="s2">&quot;nested-object&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s2">&quot;module.Example&quot;</span><span class="p">,</span>
    <span class="n">factory_name</span><span class="o">=</span><span class="s2">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or using XML configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">component</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;nested-object&quot;</span> <span class="n">dotted</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;module.Example&quot;</span>
    <span class="n">factory</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Nested&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">factory_name</span></code> may also be a dot-separated name to specify an
arbitrarily-nested callable. The following example is equivalent
to the above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span>
    <span class="s2">&quot;nested-object&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
    <span class="n">factory_name</span><span class="o">=</span><span class="s2">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or again using XML configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">component</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;nested-object&quot;</span> <span class="n">dotted</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;module&quot;</span>
    <span class="n">factory</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example.Nested&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The important thing to remember is that <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dotted_name</span></code></a>
must be <strong>importable</strong>, and <code class="docutils literal notranslate"><span class="pre">factory_name</span></code> must be
accessible from the imported class or module via attribute
access.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.member_name">
<code class="descname">member_name</code><a class="headerlink" href="#aglyph.component.Component.member_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of any member of <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dotted_name</span></code></a> <em>(read-only)</em>.</p>
<p><code class="docutils literal notranslate"><span class="pre">member_name</span></code> can be used to obtain an object <em>directly</em> from
an importable module or class. The named member is simply
accessed and returned (it is <strong>not</strong> called, even if it is
callable).</p>
<p>Consider the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># module.py</span>
<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The following example shows how to define a component that will
produce the <code class="docutils literal notranslate"><span class="pre">module.Example.Nested</span></code> class <em>itself</em> when
assembled:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span>
    <span class="s2">&quot;nested-class&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s2">&quot;module.Example&quot;</span><span class="p">,</span>
    <span class="n">member_name</span><span class="o">=</span><span class="s2">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or using XML configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">component</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;nested-class&quot;</span> <span class="n">dotted</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;module.Example&quot;</span>
    <span class="n">member</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Nested&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">member_name</span></code> may also be a dot-separated name to specify an
arbitrarily-nested member. The following example is equivalent
to the above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span>
    <span class="s2">&quot;nested-class&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s2">&quot;module&quot;</span><span class="p">,</span>
    <span class="n">member_name</span><span class="o">=</span><span class="s2">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or again using XML configuration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">component</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;nested-class&quot;</span> <span class="n">dotted</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;module&quot;</span>
    <span class="n">member</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Example.Nested&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The important thing to remember is that <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">dotted_name</span></code></a>
must be <strong>importable</strong>, and <code class="docutils literal notranslate"><span class="pre">member_name</span></code> must be
accessible from the imported class or module via attribute
access.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When a component specifies <code class="docutils literal notranslate"><span class="pre">member_name</span></code>, initialization is
assumed. In other words, Aglyph <strong>will not</strong> attempt to
initialize the member, and will <strong>ignore</strong> any <code class="xref py py-attr docutils literal notranslate"><span class="pre">args</span></code>
and <code class="xref py py-attr docutils literal notranslate"><span class="pre">keywords</span></code>.</p>
<p>On assembly, if any initialization arguments and/or keyword
arguments have been defined for such a component, they are
discarded and a WARNING-level log record is emitted to the
“aglyph.assembler.Assembler” channel.</p>
<p class="last">(Any <code class="xref py py-attr docutils literal notranslate"><span class="pre">attributes</span></code> that have been specified for the
component will still be processed as setter injection
dependencies, however.)</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.strategy">
<code class="descname">strategy</code><a class="headerlink" href="#aglyph.component.Component.strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>The component assembly strategy <em>(read-only)</em>.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Aglyph</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new in release 3.0.0.post1?</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Getting started with Aglyph</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Aglyph cookbook</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api-ref.html">Aglyph API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aglyph.html"><code class="docutils literal notranslate"><span class="pre">aglyph</span></code> — Dependency Injection for Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.assembler.html"><code class="docutils literal notranslate"><span class="pre">aglyph.assembler</span></code> — The Aglyph component assembler</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">aglyph.component</span></code> — Defining components and their dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.context.html"><code class="docutils literal notranslate"><span class="pre">aglyph.context</span></code> — Defining component contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.integration.cherrypy.html"><code class="docutils literal notranslate"><span class="pre">aglyph.integration.cherrypy</span></code> — Integrating Aglyph with CherryPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="context-fluent-api.html">The Aglyph Context fluent API</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Aglyph 3.0.0.post1 testing summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap for future releases</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="api-ref.html">Aglyph API reference</a><ul>
      <li>Previous: <a href="aglyph.assembler.html" title="previous chapter"><code class="docutils literal notranslate"><span class="pre">aglyph.assembler</span></code> — The Aglyph component assembler</a></li>
      <li>Next: <a href="aglyph.context.html" title="next chapter"><code class="docutils literal notranslate"><span class="pre">aglyph.context</span></code> — Defining component contexts</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2006, 2011, 2013-2018 Matthew Zipay.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/aglyph.component.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>