
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Other notable usage scenarios &#8212; Aglyph 3.0.0.post1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Integrating Aglyph" href="cookbook-integration.html" />
    <link rel="prev" title="Component inheritance using templates" href="cookbook-templating.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="other-notable-usage-scenarios">
<h1>Other notable usage scenarios<a class="headerlink" href="#other-notable-usage-scenarios" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Release:</th><td class="field-body">3.0.0.post1</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><a class="reference internal" href="#staticmethod-classmethod-nestedclass-component"><span class="std std-ref">Describe components for static methods, class methods, or nested classes</span></a></li>
<li><a class="reference internal" href="#member-component"><span class="std std-ref">Describe components for module or class members</span></a></li>
<li><a class="reference internal" href="#impl-specific-component"><span class="std std-ref">Describe components for Python implementation-specific objects (Stackless, PyPy, IronPython, Jython)</span></a></li>
<li><a class="reference internal" href="#custom-xmlcontext-parser"><span class="std std-ref">Use a custom XML parser for XMLContext</span></a></li>
<li><a class="reference internal" href="#clear-caches"><span class="std std-ref">Clear the Aglyph singleton, weakref, and borg memory caches</span></a></li>
</ul>
<div class="section" id="describe-components-for-static-methods-class-methods-or-nested-classes">
<span id="staticmethod-classmethod-nestedclass-component"></span><h2>Describe components for static methods, class methods, or nested classes<a class="headerlink" href="#describe-components-for-static-methods-class-methods-or-nested-classes" title="Permalink to this headline">¶</a></h2>
<p>You may encounter cases where objects for which you want to describe components
are created through static methods (<code class="docutils literal notranslate"><span class="pre">&#64;staticmethod</span></code>), class methods
(<code class="docutils literal notranslate"><span class="pre">&#64;classmethod</span></code>), or nested classes.</p>
<p>Recall that an Aglyph component must have an <em>importable</em> dotted name.
Unfortunately, the dotted names for static methods, class methods, and nested
classes are <strong>not</strong> importable.</p>
<p>Aglyph components support an optional
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.factory_name</span></code></a> property to address these
cases. The <code class="docutils literal notranslate"><span class="pre">factory_name</span></code> is itself a dotted name, but it is <em>relative to</em>
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.dotted_name</span></code></a>.</p>
<p>The following sample <em>delorean.py</em> module helps to illustrate the concepts, and
will be used in the code examples below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">EquipmentFoundry</span><span class="p">:</span>

    <span class="k">class</span> <span class="nc">FluxCapacitor</span><span class="p">:</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">with_capacitor_drive</span><span class="p">(</span><span class="n">capacitor_drive</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Return a fully-operational FluxCapacitor.&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_default_capacitor_drive</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Return an experimental CapacitorDrive.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The objects which we wish to describe as components (<code class="docutils literal notranslate"><span class="pre">FluxCapacitor</span></code> and
<code class="docutils literal notranslate"><span class="pre">CapacitorDrive</span></code>), are created by callables having dotted names that are
<strong>not importable</strong>:</p>
<ol class="arabic simple">
<li>The class named <code class="docutils literal notranslate"><span class="pre">delorean.EquipmentFoundry.FluxCapacitor</span></code>.</li>
<li>The class method named
<code class="docutils literal notranslate"><span class="pre">delorean.EquipmentFoundry.FluxCapacitor.with_capacitor_drive</span></code>.</li>
<li>The static method named
<code class="docutils literal notranslate"><span class="pre">delorean.EquipmentFoundry.get_default_capacitor_drive</span></code>.</li>
</ol>
<p>However, we can use either of the dotted names that <em>are</em> importable (the
module named <code class="docutils literal notranslate"><span class="pre">delorean</span></code> and the class named <code class="docutils literal notranslate"><span class="pre">delorean.EquipmentFoundry</span></code>) to
define our components, and specify <em>relative</em> dotted names as
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.factory_name</span></code></a> values to enable Aglyph to
assemble <code class="docutils literal notranslate"><span class="pre">FluxCapacitor</span></code> and <code class="docutils literal notranslate"><span class="pre">CapacitorDrive</span></code> as components.</p>
<div class="section" id="using-declarative-xml-configuration">
<h3>Using declarative XML configuration<a class="headerlink" href="#using-declarative-xml-configuration" title="Permalink to this headline">¶</a></h3>
<p>In a <em>delorean-context.xml</em> document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;delorean-context&quot;&gt;
    &lt;component id=&quot;default-drive&quot;
            dotted-name=&quot;delorean&quot;
            factory-name=&quot;EquipmentFoundry.get_default_capacitor_drive&quot; /&gt;
    &lt;component id=&quot;capacitor-nodrive&quot;
            dotted-name=&quot;delorean.EquipmentFoundry&quot;
            factory-name=&quot;FluxCapacitor&quot; /&gt;
    &lt;component id=&quot;capacitor-withdrive&quot;
            dotted-name=&quot;delorean.EquipmentFoundry&quot;
            factory-name=&quot;FluxCapacitor.with_capacitor_drive&quot;&gt;
        &lt;init&gt;
            &lt;arg ref=&quot;default-drive&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>Key things to note in this configuration:</p>
<ul class="simple">
<li>For <strong>any</strong> of the components, we have the option of using either
<code class="docutils literal notranslate"><span class="pre">delorean</span></code> or <code class="docutils literal notranslate"><span class="pre">delorean.EquipmentFoundry</span></code> as a component’s dotted name
because both of these names are importable. Which we choose influences how
the factory name must be specified - it must be <em>relative to</em> the dotted
name.</li>
<li>Any factory name is just a dotted name - but split into its individual names,
it must represent a callable object that can be obtained via attribute access
on the module or class identified by the dotted name.</li>
</ul>
<p>We can now assemble the <em>“capacitor-nodrive”</em> and <em>“capacitor-withdrive”</em>
components as we would any other Aglyph components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;delorean-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flux_capacitor_without_drive</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;capacitor-nodrive&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flux_capacitor_with_drive</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;capacitor-withdrive&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you remember nothing else, remember this:</p>
<ol class="last arabic simple">
<li><a class="reference internal" href="aglyph.component.html#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.dotted_name</span></code></a> must be <strong>importable</strong>.</li>
<li><a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.factory_name</span></code></a> must be <em>relative to</em>
the importable <code class="docutils literal notranslate"><span class="pre">dotted_name</span></code>.</li>
</ol>
</div>
</div>
<div class="section" id="using-fluent-api-configuration">
<h3>Using fluent API configuration<a class="headerlink" href="#using-fluent-api-configuration" title="Permalink to this headline">¶</a></h3>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="k">import</span> <span class="n">Reference</span> <span class="k">as</span> <span class="n">ref</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s2">&quot;delorean-context&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;default-drive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;delorean&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;EquipmentFoundry.get_default_capacitor_drive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;capacitor-nodrive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;delorean.EquipmentFoundry&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;FluxCapacitor&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;capacitor-withdrive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;delorean.EquipmentFoundry&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;FluxCapacitor.with_capacitor_drive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">ref</span><span class="p">(</span><span class="s2">&quot;default-drive&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="describe-components-for-module-or-class-members">
<span id="member-component"></span><h2>Describe components for module or class members<a class="headerlink" href="#describe-components-for-module-or-class-members" title="Permalink to this headline">¶</a></h2>
<p>Similar in nature to the <code class="docutils literal notranslate"><span class="pre">factory_name</span></code> property explained in the previous
section, the <a class="reference internal" href="aglyph.component.html#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.member_name</span></code></a> property provides a
way to access objects that are not directly importable.</p>
<p>But there are two key differences between <code class="docutils literal notranslate"><span class="pre">member_name</span></code> and <code class="docutils literal notranslate"><span class="pre">factory_name</span></code>:</p>
<ol class="arabic simple">
<li>The object identified by a <code class="docutils literal notranslate"><span class="pre">member_name</span></code> is not required to be callable.
Instead, the object itself is considered to <strong>be</strong> the component object.</li>
<li>Even if the object identified by a <code class="docutils literal notranslate"><span class="pre">member_name</span></code> <em>is</em> callable, Aglyph
will <strong>not</strong> call it.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>As a consequence of #1, any initialization arguments or keywords that are
specified for a component that also specifies a <code class="docutils literal notranslate"><span class="pre">member_name</span></code> are
<strong>ignored</strong> (i.e. Aglyph does <strong>not</strong> initialize the <code class="docutils literal notranslate"><span class="pre">member_name</span></code>
object). However, any “setter” dependencies (setter methods, fields,
properties) defined for such a component <strong>are</strong> processed.</p>
<p class="last">As a consequence of #2, you can define components whose objects are of <em>any</em>
type, including class types, function types, and (sub)module types.</p>
</div>
<p>In the examples below, we will use the Python standard library
<a class="reference external" href="https://docs.python.org/3/library/http.server.html#http.server.HTTPServer" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">http.server.HTTPServer</span></code></a> class (whose initializer accepts a <code class="docutils literal notranslate"><span class="pre">class</span></code>
object for the request handler class) to demonstrate one possible use of the
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">aglyph.component.Component.member_name</span></code></a> property.</p>
<div class="section" id="id1">
<h3>Using declarative XML configuration<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In a <em>cookbook-context.xml</em> document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;cookbook-context&quot;&gt;
    &lt;component id=&quot;request-handler-class&quot;
            dotted-name=&quot;http.server&quot;
            member-name=&quot;BaseHTTPRequestHandler&quot; /&gt;
    &lt;component id=&quot;http-server&quot; dotted-name=&quot;http.server.HTTPServer&quot;&gt;
        &lt;init&gt;
            &lt;arg&gt;
                &lt;tuple&gt;
                    &lt;str&gt;localhost&lt;/str&gt;
                    &lt;int&gt;8080&lt;/int&gt;
                &lt;/tuple&gt;
            &lt;/arg&gt;
            &lt;arg reference=&quot;request-handler-class&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>When the <em>“http-server”</em> component is assembled, its second initialization
argument is actually the <em>class</em> <code class="docutils literal notranslate"><span class="pre">http.server.BaseHTTPRequestHandler</span></code> (as
opposed to an <em>instance</em> thereof):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;cookbook-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">httpd</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;http-server&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">httpd</span><span class="o">.</span><span class="n">RequestHandlerClass</span>
<span class="go">&lt;class &#39;http.server.BaseHTTPRequestHandler&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;request-handler-class&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">httpd</span><span class="o">.</span><span class="n">RequestHandlerClass</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Using fluent API configuration<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="k">import</span> <span class="n">Reference</span> <span class="k">as</span> <span class="n">ref</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s2">&quot;cookbook-context&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;request-handler-class&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;http.server&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s2">&quot;BaseHTTPRequestHandler&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;http-server&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;http.server.HTTPServer&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">((</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">),</span> <span class="n">ref</span><span class="p">(</span><span class="s2">&quot;request-handler-class&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="describe-components-for-python-implementation-specific-objects-stackless-pypy-ironpython-jython">
<span id="impl-specific-component"></span><h2>Describe components for Python implementation-specific objects (Stackless, PyPy, IronPython, Jython)<a class="headerlink" href="#describe-components-for-python-implementation-specific-objects-stackless-pypy-ironpython-jython" title="Permalink to this headline">¶</a></h2>
<p>Strictly speaking, there is nothing “special” (from an Aglyph perspective)
about the examples presented in the following subsections. They just build
upon the previous cookbook recipes <a class="reference internal" href="cookbook-common.html#simple-component"><span class="std std-ref">Describe a simple component (a class or an unbound factory function)</span></a>,
<a class="reference internal" href="cookbook-common.html#component-reference"><span class="std std-ref">Use a reference to another component as a dependency</span></a>, and
<a class="reference internal" href="#staticmethod-classmethod-nestedclass-component"><span class="std std-ref">Describe components for static methods, class methods, or nested classes</span></a> to once again demonstrate
that Aglyph can assemble <em>any</em> component that can be described using dotted
name notation, even when the class or function is only available to a specific
implementation of Python.</p>
<div class="section" id="example-1-describe-a-component-for-a-stackless-python-or-pypy-tasklet">
<h3>Example 1: Describe a component for a Stackless Python or PyPy tasklet<a class="headerlink" href="#example-1-describe-a-component-for-a-stackless-python-or-pypy-tasklet" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/stackless-dev/stackless/wiki">Stackless Python</a> and <a class="reference external" href="http://pypy.org/">PyPy</a> Python implementations support the
<a class="reference external" href="https://stackless.readthedocs.io/en/latest/library/stackless/tasklets.html">stackless.tasklet</a> wrapper, which allows any callable to run as a microthread.</p>
<p>The examples below demonstrate the Aglyph configuration for a variation of the
sample code given in the <a class="reference external" href="https://github.com/stackless-dev/stackless/wiki/Tasklets">Stackless Python “Tasklets”</a> Wiki article.</p>
<div class="section" id="id3">
<h4>Using declarative XML configuration<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>In a <em>cookbook-context.xml</em> document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;cookbook-context&quot;&gt;
    &lt;component id=&quot;aCallable-func&quot; dotted-name=&quot;cookbook&quot;
            member-name=&quot;aCallable&quot; /&gt;
    &lt;component id=&quot;aCallable-task&quot; dotted-name=&quot;stackless.tasklet&quot;&gt;
        &lt;init&gt;
            &lt;arg reference=&quot;aCallable-func&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>Assembling and running this tasklet looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;cookbook-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;aCallable-task&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s2">&quot;assembled by Aglyph&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">&#39;aCallable: assembled by Aglyph&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h4>Using fluent API configuration<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>Below is an example of programmatic configuration, but with a twist - we allow
Aglyph to inject the function argument into the task so that we only need to
assemble and run it. This works because the <code class="docutils literal notranslate"><span class="pre">stackless.tasklet.setup</span></code> method
has setter method semantics.</p>
<p>In a <em>bindings.py</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="k">import</span> <span class="n">Reference</span> <span class="k">as</span> <span class="n">ref</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s2">&quot;cookbook-context&quot;</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;aCallable-func&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;cookbook&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s2">&quot;aCallable&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;aCallable-task&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;stackless.tasklet&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">ref</span><span class="p">(</span><span class="s2">&quot;aCallable-func&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="nb">set</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s2">&quot;injected by Aglyph&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
</pre></div>
</div>
<p>Assembling and running this tasklet looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="k">import</span> <span class="n">context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;aCallable-task&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">&#39;aCallable: injected by Aglyph&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-2-describe-a-component-for-a-net-xmlreader">
<h3>Example 2: Describe a component for a .NET XmlReader<a class="headerlink" href="#example-2-describe-a-component-for-a-net-xmlreader" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://ironpython.net/">IronPython</a> developers have access to the .NET Framework Standard Library and
any custom assemblies via the <code class="docutils literal notranslate"><span class="pre">clr</span></code> module, allowing any .NET namespace to be
loaded into the IronPython runtime and used.</p>
<p>In the examples below, we use <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.xml.dtdprocessing.aspx">System.Xml.DtdProcessing</a>,
<a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.xml.validationtype.aspx">System.Xml.ValidationType</a>, <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.aspx">System.Xml.XmlReaderSettings</a>, and
<a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx">System.Xml.XmlReader</a> to configure an XML reader that parses a fictitious
“AppConfig.xml” document.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When using IronPython, the .NET namespace for any class referenced in an
Aglyph component <strong>must</strong> be loaded prior to asking Aglyph to assemble the
component. (Otherwise, those classes would not be importable in IronPython.)</p>
<p>In the examples given below, this means that the following statements must
be executed <em>before</em> <a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.assemble" title="aglyph.assembler.Assembler.assemble"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.assemble()</span></code></a> or
<code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.binder.Binder.lookup()</span></code> is called (because the “System.Xml”
namespace is not present by default):</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s2">&quot;System.Xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h4>Using declarative XML configuration<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>In a <em>dotnet-context.xml</em> document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;context id=&quot;dotnet-context&quot;&gt;
    &lt;component id=&quot;dtd-parse&quot; dotted-name=&quot;System.Xml&quot;
            member-name=&quot;DtdProcessing.Parse&quot; /&gt;
    &lt;component id=&quot;dtd-validate&quot; dotted-name=&quot;System.Xml&quot;
            member-name=&quot;ValidationType.DTD&quot; /&gt;
    &lt;component id=&quot;xmlreader-settings&quot; dotted-name=&quot;System.Xml.XmlReaderSettings&quot;&gt;
        &lt;attributes&gt;
            &lt;attribute name=&quot;IgnoreComments&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;IgnoreProcessingInstructions&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;IgnoreWhitespace&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;DtdProcessing&quot; reference=&quot;dtd-parse&quot; /&gt;
            &lt;attribute name=&quot;ValidationType&quot; reference=&quot;dtd-validate&quot; /&gt;
        &lt;/attributes&gt;
    &lt;/component&gt;
    &lt;component id=&quot;app-config-reader&quot; dotted-name=&quot;System.Xml.XmlReader&quot;
            factory-name=&quot;Create&quot;&gt;
        &lt;init&gt;
            &lt;arg&gt;&lt;str&gt;file:///C:/Example/Settings/AppConfig.xml&lt;/str&gt;&lt;/arg&gt;
            &lt;arg reference=&quot;xmlreader-settings&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>With the Aglyph context in place, we can now assemble an XML reader for our
fictitious application configuration reader:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s2">&quot;System.Xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;dotnet-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;app-config-reader&quot;</span><span class="p">)</span>
<span class="go">&lt;System.Xml.XmlValidatingReaderImpl object at 0x000000000000002B [System.Xml.XmlValidatingReaderImpl]&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h4>Using fluent API configuration<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="k">import</span> <span class="n">Reference</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s2">&quot;dotnet-context&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;dtd-parse&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;System.Xml&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s2">&quot;DtdProcessing.Parse&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;dtd-validate&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;System.Xml&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s2">&quot;ValidationType.DTD&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;xmlreader-settings&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;System.Xml.XmlReaderSettings&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="nb">set</span><span class="p">(</span>
        <span class="n">IgnoreComments</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">IgnoreProcessingInstructions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">IgnoreWhitespace</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">DtdProcessing</span><span class="o">=</span><span class="n">Reference</span><span class="p">(</span><span class="s2">&quot;dtd-parse&quot;</span><span class="p">),</span>
        <span class="n">ValidationType</span><span class="o">=</span><span class="n">Reference</span><span class="p">(</span><span class="s2">&quot;dtd-validate&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;app-config-reader&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;System.Xml.XmlReader&quot;</span><span class="p">,</span> <span class="n">factory_name</span><span class="o">=</span><span class="s2">&quot;Create&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span>
        <span class="s2">&quot;file:///C:/Example/Settings/AppConfig.xml&quot;</span><span class="p">,</span>
        <span class="n">Reference</span><span class="p">(</span><span class="s2">&quot;xmlreader-settings&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
</pre></div>
</div>
<p>The code to assemble the fictitious application configuration reader looks like
this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s2">&quot;System.Xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="k">import</span> <span class="n">context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;app-config-reader&quot;</span><span class="p">)</span>
<span class="go">&lt;System.Xml.XmlValidatingReaderImpl object at 0x000000000000002B [System.Xml.XmlValidatingReaderImpl]&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-3-describe-a-component-for-a-java-linkedhashmap">
<h3>Example 3: Describe a component for a Java™ LinkedHashMap<a class="headerlink" href="#example-3-describe-a-component-for-a-java-linkedhashmap" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.jython.org/">Jython</a> developers have direct access to the Java™ Platform API and any custom
JARs in the runtime <em>CLASSPATH</em>.</p>
<p>In the examples below, we use
<a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map">java.util.Collections#synchronizedMap(java.util.Map)</a> and <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html">java.util.LinkedHashMap</a>
to configure a thread-safe, insertion-order hash map.</p>
<div class="section" id="id7">
<h4>Using declarative XML configuration<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>In a <em>java-context.xml</em> document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;java-context&quot;&gt;
    &lt;component id=&quot;java.util.LinkedHashMap&quot; /&gt;
    &lt;component id=&quot;threadsafe-ordered-map&quot; dotted-name=&quot;java.util.Collections&quot;
            factory-name=&quot;synchronizedMap&quot;&gt;
        &lt;init&gt;
            &lt;arg reference=&quot;java.util.LinkedHashMap&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>To assemble our map:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s2">&quot;java-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;threadsafe-ordered-map&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="o">.</span><span class="vm">__class__</span>
<span class="go">&lt;type &#39;java.util.Collections$SynchronizedMap&#39;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h4>Using fluent API configuration<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="k">import</span> <span class="n">Context</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="k">import</span> <span class="n">Reference</span>

<span class="n">context</span> <span class="o">=</span> <span class="n">Context</span><span class="p">(</span><span class="s2">&quot;java-context&quot;</span><span class="p">)</span>
<span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;java.util.LinkedHashMap&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">component</span><span class="p">(</span><span class="s2">&quot;threadsafe-ordered-map&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">create</span><span class="p">(</span><span class="s2">&quot;java.util.Collections&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s2">&quot;synchronizedMap&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">Reference</span><span class="p">(</span><span class="s2">&quot;java.util.LinkedHashMap&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">register</span><span class="p">())</span>
</pre></div>
</div>
<p>Assembling the map looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="k">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="k">import</span> <span class="n">context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s2">&quot;threadsafe-ordered-map&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="o">.</span><span class="vm">__class__</span>
<span class="go">&lt;type &#39;java.util.Collections$SynchronizedMap&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-a-custom-xml-parser-for-xmlcontext">
<span id="custom-xmlcontext-parser"></span><h2>Use a custom XML parser for XMLContext<a class="headerlink" href="#use-a-custom-xml-parser-for-xmlcontext" title="Permalink to this headline">¶</a></h2>
<p>Aglyph uses the <a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="(in Python v3.7)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> API for processing context
documents. By default, ElementTree uses the <a class="reference external" href="https://libexpat.github.io/">Expat</a> XML parser (via
<a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.XMLParser</span></code></a>) to build element structures.</p>
<p>However, developers may subclass <a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.XMLParser</span></code></a> to
use <em>any</em> XML parser; simply pass an instance of the subclass to
<a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.context.XMLContext</span></code></a> as the <code class="docutils literal notranslate"><span class="pre">parser</span></code> keyword argument.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For a real, working example, please refer to <code class="docutils literal notranslate"><span class="pre">aglyph._compat.CLRXMLParser</span></code>,
which is an <a class="reference external" href="https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">xml.etree.ElementTree.XMLParser</span></code></a> subclass that uses the
.NET <a class="reference external" href="https://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx">System.Xml.XmlReader</a> parser.</p>
</div>
</div>
<div class="section" id="clear-the-aglyph-singleton-weakref-and-borg-memory-caches">
<span id="clear-caches"></span><h2>Clear the Aglyph singleton, weakref, and borg memory caches<a class="headerlink" href="#clear-the-aglyph-singleton-weakref-and-borg-memory-caches" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><code class="xref py py-class docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler</span></code></a> automatically caches objects of
<strong>singleton</strong> and <strong>weakref</strong> components, as well as the shared-state
dictionaries of <strong>borg</strong> components, in memory. There is no automatic eviction
strategy.</p>
<p>These caches may be cleared explicitly by calling
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></code></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></code></a>,  or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></code></a>, respectively. Each method
returns a list of component IDs that were evicted.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There are some limitations on weakref caching, particularly with respect to
<a class="reference internal" href="aglyph.component.html#lifecycle-methods"><span class="std std-ref">lifecycle methods</span></a>. Please see
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></code></a> for details.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Aglyph</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What’s new in release 3.0.0.post1?</a></li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Getting started with Aglyph</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cookbook.html">Aglyph cookbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cookbook-understanding.html">Understand the general features of Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-configuration.html">Choose a configuration approach for Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-common.html">Common usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-templating.html">Component inheritance using templates</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Other notable usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-integration.html">Integrating Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-ref.html">Aglyph API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="context-fluent-api.html">The Aglyph Context fluent API</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Aglyph 3.0.0.post1 testing summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap for future releases</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="cookbook.html">Aglyph cookbook</a><ul>
      <li>Previous: <a href="cookbook-templating.html" title="previous chapter">Component inheritance using templates</a></li>
      <li>Next: <a href="cookbook-integration.html" title="next chapter">Integrating Aglyph</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2006, 2011, 2013-2018 Matthew Zipay.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.8</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/cookbook-notable.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>