# Auto-generated by the Cortex Python SDK

FROM {{base_image}}

WORKDIR /app

RUN apt-get update && apt-get install -y linux-headers-amd64 build-essential

RUN conda config --add channels conda-forge
RUN conda install --yes flask gunicorn

COPY conda_requirements.txt .
RUN conda install --yes --file conda_requirements.txt

RUN pip install --upgrade dill==0.2.8.2 fdk==0.0.31 cortex-client>=5.3.1

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY action.py .

EXPOSE {{port}}

ENTRYPOINT ["gunicorn", "-b", "0.0.0.0:{{port}}", "-t", "60", "action:app"]
