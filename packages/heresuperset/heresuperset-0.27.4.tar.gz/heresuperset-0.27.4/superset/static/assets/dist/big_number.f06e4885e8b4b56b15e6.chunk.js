(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1180:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTextDimension=i,t.getTextWidth=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"12px Roboto";return i({text:e,style:{font:t}}).width},t.computeMaxFontSize=function(e){var t=e.text,r=e.idealFontSize,n=e.maxWidth,o=e.maxHeight,l=e.className,u=e.style,d=e.container,s=r;if(!a(r)){if(!a(o))throw new Error("You must specify at least one of maxHeight or idealFontSize");s=Math.floor(o)}function c(e){return i({text:t,className:l,style:Object.assign({},u,{fontSize:e}),container:d})}var f=c(s);if(a(n))for(;f.width>n;)f=c(s-=2);if(a(o))for(;f.height>o;)f=c(s-=2);return s};var n="http://www.w3.org/2000/svg";function a(e){return null!==e&&void 0!==e}function i(e){var t=e.text,r=e.className,i=e.style,o=e.container,l=void 0===o?document.body:o,u=document.createElementNS(n,"text");u.textContent=t,a(r)&&u.setAttribute("class",r),a(i)&&["font","fontWeight","fontStyle","fontSize","fontFamily","letterSpacing"].filter(function(e){return a(i[e])}).forEach(function(e){u.style[e]=i[e]});var d=document.createElementNS(n,"svg");d.style.position="absolute",d.style.opacity=0,d.appendChild(u),l.appendChild(d);var s=void 0;if(u.getBBox){var c=u.getBBox();s={width:Math.ceil(c.width),height:Math.ceil(c.height)}}else s={width:100,height:100};return l.removeChild(d),s}},2724:function(e,t,r){},656:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=h(r(1)),o=h(r(0)),l=h(r(15)),u=r(2887),d=r(240),s=r(31),c=r(50),f=r(1180);function h(e){return e&&e.__esModule?e:{default:e}}r(2724);var m={top:4,right:4,bottom:4,left:4},p={HEADER:.4,SUBHEADER:.14,HEADER_WITH_TRENDLINE:.3,SUBHEADER_WITH_TRENDLINE:.125,TRENDLINE:.3};function b(e){return function(){return function(t){var r=t.datum,n=r.x,a=r.y,o=(0,c.formatDateVerbose)(n),l=e(a);return i.default.createElement("div",{style:{padding:"4px 8px"}},o,i.default.createElement("br",null),i.default.createElement("strong",null,l))}}()}function y(e){return e}var g={className:o.default.string,width:o.default.number.isRequired,height:o.default.number.isRequired,bigNumber:o.default.number.isRequired,formatBigNumber:o.default.func,subheader:o.default.string,showTrendline:o.default.bool,startYAxisAtZero:o.default.bool,trendlineData:o.default.array,mainColor:o.default.string,gradientId:o.default.string,renderTooltip:o.default.func},v={className:"",formatBigNumber:y,subheader:"",showTrendline:!1,startYAxisAtZero:!0,trendlineData:null,mainColor:d.brandColor,gradientId:"",renderTooltip:b(y)},E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i["default"].Component),a(t,[{key:"getClassName",value:function(){return function(){var e=this.props,t="big_number "+e.className;return e.showTrendline?t:t+" no_trendline"}}()},{key:"createTemporaryContainer",value:function(){return function(){var e=document.createElement("div");return e.className=this.getClassName(),e.style.position="absolute",e.style.opacity=0,e}}()},{key:"renderHeader",value:function(){return function(e){var t=this.props,r=t.bigNumber,n=t.formatBigNumber,a=t.width,o=n(r),l=this.createTemporaryContainer();document.body.appendChild(l);var u=(0,f.computeMaxFontSize)({text:o,maxWidth:a,maxHeight:e,className:"header_line",container:l});return document.body.removeChild(l),i.default.createElement("div",{className:"header_line",style:{fontSize:u,height:e}},i.default.createElement("span",null,o))}}()},{key:"renderSubheader",value:function(){return function(e){var t=this.props,r=t.subheader,n=t.width,a=0;if(r){var o=this.createTemporaryContainer();document.body.appendChild(o),a=(0,f.computeMaxFontSize)({text:r,maxWidth:n,maxHeight:e,className:"subheader_line",container:o}),document.body.removeChild(o)}return i.default.createElement("div",{className:"subheader_line",style:{fontSize:a,height:e}},r)}}()},{key:"renderTrendline",value:function(){return function(e){var t=this.props,r=t.width,n=t.trendlineData,a=t.mainColor,o=t.subheader,l=t.renderTooltip,d=t.gradientId,s=t.startYAxisAtZero;return i.default.createElement(u.XYChart,{ariaLabel:"Big number visualization "+o,xScale:{type:"timeUtc"},yScale:{type:"linear",includeZero:s},width:r,height:e,margin:m,renderTooltip:l,snapTooltipToDataX:!0},i.default.createElement(u.LinearGradient,{id:d,from:a,to:"#fff"}),i.default.createElement(u.AreaSeries,{data:n,fill:"url(#"+d+")",stroke:a}),i.default.createElement(u.CrossHair,{stroke:a,circleFill:a,circleStroke:"#fff",showHorizontalLine:!1,fullHeight:!0,strokeDasharray:"5,2"}))}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.showTrendline,r=e.height,n=this.getClassName();if(t){var a=Math.floor(p.TRENDLINE*r),o=r-a;return i.default.createElement("div",{className:n},i.default.createElement("div",{className:"text_container",style:{height:o}},this.renderHeader(Math.ceil(p.HEADER_WITH_TRENDLINE*r)),this.renderSubheader(Math.ceil(p.SUBHEADER_WITH_TRENDLINE*r))),this.renderTrendline(a))}return i.default.createElement("div",{className:n,style:{height:r}},this.renderHeader(Math.ceil(p.HEADER*r)),this.renderSubheader(Math.ceil(p.SUBHEADER*r)))}}()}]),t}();E.propTypes=g,E.defaultProps=v,t.default=function(e,t){var r=e.formData,a=e.containerId,o=t.data,u=o.data,c=o.subheader,f=o.compare_suffix,h=Number(t.data.compare_lag),m="big_number"===r.viz_type,p=m&&r.show_trend_line,y=r.start_y_axis_at_zero,g=(0,s.d3FormatPreset)(r.y_axis_format),v=m?u[u.length-1][1]:u[0][0],_=0,w=c;if(m&&h>0){var N=u.length-(h+1);if(N>=0){var x=u[N][1];_=0===x?0:(v-x)/Math.abs(x),w=d3.format("+.1%")(_)+" "+f}}var T=p?u.map(function(e){var t=n(e,2);return{x:t[0],y:t[1]}}):null,S="";_>0?S="positive":_<0&&(S="negative"),l.default.render(i.default.createElement(E,{className:S,width:e.width(),height:e.height(),bigNumber:v,formatBigNumber:g,subheader:w,showTrendline:p,startYAxisAtZero:y,trendlineData:T,mainColor:d.brandColor,gradientId:"big_number_"+a,renderTooltip:b(g)}),document.getElementById(a))}}}]);