(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{1803:function(t,e,r){"use strict";var a=function(t){return t&&t.__esModule?t:{default:t}}(r(52));r(2846);var o=r(240);t.exports=function(t,e){var r=e.form_data,i=void 0,n=void 0,s=void 0,c=void 0,l=t.container,d=e.data,u=a.default.format(r.number_format),h=(0,o.colorScalerFactory)(r.linear_color_scheme,d,function(t){return t.metric}),f={};d.forEach(function(t){f[t.country_id]=h(t.metric)});var p=function(t){return f[t.properties.ISO]||"none"},v=void 0;i=a.default.geo.path(),a.default.select(t.selector).selectAll("*").remove();var g=a.default.select(t.selector).append("svg:svg").attr("width",t.width()).attr("height",t.height()).attr("preserveAspectRatio","xMidYMid meet");l.css("height",t.height()),l.css("width",t.width());var w=function(e){var r=void 0,a=void 0,o=void 0,l=void 0,d=void 0,u=void 0,h=void 0,f=void 0;if(e&&v!==e){var p=i.centroid(e);r=p[0],a=p[1],l=p[0],d=p[1]-40,h=p[0],f=p[1]-40,u="6px",o=4,v=e}else r=t.width()/2,a=t.height()/2,l=0,d=0,h=0,f=0,u="30px",o=1,v=null;n.transition().duration(750).attr("transform","translate("+t.width()/2+","+t.height()/2+")scale("+o+")translate("+-r+","+-a+")"),s.transition().duration(750).attr("transform","translate(0,0)translate("+l+","+d+")").style("font-size",u),c.transition().duration(750).attr("transform","translate(0,0)translate("+h+","+f+")")},m=function(t){var e="";t&&t.properties&&(e=t.properties.ID_2?t.properties.NAME_2:t.properties.NAME_1),s.text(e)},x=function(t){t.length>0&&c.text(u(t[0].metric))},_=function(t){var e=p(t);"none"!==e&&(e=a.default.rgb(e).darker().toString()),a.default.select(this).style("fill",e),m(t);var r=d.filter(function(e){return e.country_id===t.properties.ISO});x(r)},y=function(){a.default.select(this).style("fill",p),s.text(""),c.text("")};g.append("rect").attr("class","background").attr("width",t.width()).attr("height",t.height()).on("click",w);var b=(n=g.append("g")).append("g").classed("map-layer",!0);s=n.append("text").classed("big-text",!0).attr("x",20).attr("y",45),c=n.append("text").classed("result-text",!0).attr("x",20).attr("y",60);var k="/static/assets/src/visualizations/countries/"+r.select_country.toLowerCase()+".geojson";a.default.json(k,function(e,r){var o=r.features,n=a.default.geo.centroid(r),s=150,c=[t.width()/2,t.height()/2],l=a.default.geo.mercator().scale(s).center(n).translate(c),d=(i=i.projection(l)).bounds(r),u=s*t.width()/(d[1][0]-d[0][0]),h=s*t.height()/(d[1][1]-d[0][1]);s=u<h?u:h,c=[t.width()-(d[0][0]+d[1][0])/2,t.height()-(d[0][1]+d[1][1])/2],l=a.default.geo.mercator().center(n).scale(s).translate(c),i=i.projection(l),b.selectAll("path").data(o).enter().append("path").attr("d",i).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",p).on("mouseenter",_).on("mouseout",y).on("click",w)}),l.show()}},2846:function(t,e,r){}}]);