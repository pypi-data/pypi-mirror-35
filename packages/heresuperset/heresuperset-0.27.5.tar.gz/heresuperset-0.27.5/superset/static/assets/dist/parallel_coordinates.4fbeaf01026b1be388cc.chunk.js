(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1796:function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(52));n(2776),n(2778),r.default.parcoords=n(2780),r.default.divgrid=n(2781);var i=n(22);t.exports=function(t,e){i("#code").attr("rows","15");var n=t.formData,a=e.data,o=n.metrics;n.include_series&&(o=[n.series].concat(n.metrics));var s={};s[n.series]="string",n.metrics.forEach(function(t){s[t]="number"});var u=r.default.extent(a,function(t){return t[n.secondary_metric]});u=[u[0],(u[1]-u[0])/2,u[1]];var l=r.default.scale.linear().domain(u).range(["red","grey","blue"]).interpolate(r.default.interpolateLab),c=function(t){return l(t[n.secondary_metric])},d=r.default.select(t.selector);d.selectAll("*").remove();var h=n.show_datatable?t.height()/2:t.height();d.append("div").attr("id","parcoords_"+t.container_id).style("height",h+"px").classed("parcoords",!0);var f=r.default.parcoords()("#parcoords_"+t.container_id).width(t.width()).color(c).alpha(.5).composite("darken").height(h).data(a).dimensions(o).types(s).render().createAxes().shadows().reorderable().brushMode("1D-axes");if(n.show_datatable){var m=r.default.divgrid();d.append("div").style("height",h+"px").datum(a).call(m).classed("parcoords grid",!0).selectAll(".row").on({mouseover:function(t){f.highlight([t])},mouseout:f.unhighlight}),f.on("brush",function(t){r.default.select(".grid").datum(t).call(m).selectAll(".row").on({mouseover:function(t){f.highlight([t])},mouseout:f.unhighlight})})}}},2776:function(t,e,n){},2778:function(t,e,n){},2780:function(t,e,n){"use strict";t.exports=function(t){var e={data:[],highlighted:[],dimensions:[],dimensionTitles:{},dimensionTitleRotation:0,types:{},brushed:!1,brushedColor:null,alphaOnBrushed:0,mode:"default",rate:20,width:600,height:300,margin:{top:24,right:0,bottom:12,left:0},nullValueSeparator:"undefined",nullValueSeparatorPadding:{top:8,right:0,bottom:8,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:0,showControlPoints:!1,hideAxis:[]};!function(t,e){for(var n in e)t[n]=e[n]}(e,t);var n,r=function(){return function t(n){return n=t.selection=d3.select(n),e.width=n[0][0].clientWidth,e.height=n[0][0].clientHeight,["marks","foreground","brushed","highlight"].forEach(function(t){f[t]=n.append("canvas").attr("class",t)[0][0],h[t]=f[t].getContext("2d")}),t.svg=n.append("svg").attr("width",e.width).attr("height",e.height).append("svg:g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),t}}(),i=d3.dispatch.apply(this,["render","resize","highlight","brush","brushend","axesreorder"].concat(d3.keys(e))),a=function(){return function(){return e.width-e.margin.right-e.margin.left}}(),o=function(){return function(){return e.height-e.margin.top-e.margin.bottom}}(),s={brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},u=d3.scale.ordinal(),l={},c={},d=(d3.svg.line(),d3.svg.axis().orient("left").ticks(5)),h={},f={},m=d3.dispatch.apply(this,d3.keys(e)).on("composite",function(t){h.foreground.globalCompositeOperation=t.value,h.brushed.globalCompositeOperation=t.value}).on("alpha",function(t){h.foreground.globalAlpha=t.value,h.brushed.globalAlpha=t.value}).on("brushedColor",function(t){h.brushed.strokeStyle=t.value}).on("width",function(t){r.resize()}).on("height",function(t){r.resize()}).on("margin",function(t){r.resize()}).on("rate",function(t){b.rate(t.value),v.rate(t.value)}).on("dimensions",function(t){u.domain(e.dimensions),s.interactive&&r.render().updateAxes()}).on("bundleDimension",function(t){e.dimensions.length||r.detectDimensions(),e.dimensions[0]in l||r.autoscale(),"number"==typeof t.value?t.value<e.dimensions.length?e.bundleDimension=e.dimensions[t.value]:t.value<e.hideAxis.length&&(e.bundleDimension=e.hideAxis[t.value]):e.bundleDimension=t.value,e.clusterCentroids=function(t){var n=d3.map(),r=d3.map();return e.data.forEach(function(e){var n=l[t](e[t]);r.has(n)||r.set(n,0);var i=r.get(n);r.set(n,i+1)}),e.data.forEach(function(i){e.dimensions.map(function(e,a){var o=l[t](i[t]);if(!n.has(o)){var s=d3.map();n.set(o,s)}n.get(o).has(e)||n.get(o).set(e,0);var u=n.get(o).get(e);u+=l[e](i[e])/r.get(o),n.get(o).set(e,u)})}),n}(e.bundleDimension)}).on("hideAxis",function(t){e.dimensions.length||r.detectDimensions(),r.dimensions(function(t,e){return t.filter(function(t){return-1===e.indexOf(t)})}(e.dimensions,t.value))});function g(){return"bottom"==e.nullValueSeparator?[o()+1-e.nullValueSeparatorPadding.bottom-e.nullValueSeparatorPadding.top,1]:"top"==e.nullValueSeparator?[o()+1,1+e.nullValueSeparatorPadding.bottom+e.nullValueSeparatorPadding.top]:[o()+1,1]}function p(){if(e.brushed&&e.brushed.length!==e.data.length)return!0;var t=E.currentMode().brushState();for(var n in t)if(t.hasOwnProperty(n))return!0;return!1}r.state=e,r.flags=s,function(t,e,n){d3.keys(e).forEach(function(i){t[i]=function(a){if(!arguments.length)return e[i];var o=e[i];return e[i]=a,m[i].call(r,{value:a,previous:o}),n[i].call(r,{value:a,previous:o}),t}})}(r,e,i),d3.rebind(r,i,"on"),r.autoscale=function(){var t={date:function(){return function(t){var n=d3.extent(e.data,function(e){return e[t]?e[t].getTime():null});return n[0]===n[1]?d3.scale.ordinal().domain([n[0]]).rangePoints(g()):d3.time.scale().domain(n).range(g())}}(),number:function(){return function(t){var n=d3.extent(e.data,function(e){return+e[t]});return n[0]===n[1]?d3.scale.ordinal().domain([n[0]]).rangePoints(g()):d3.scale.linear().domain(n).range(g())}}(),string:function(){return function(t){var n,r={};return e.data.map(function(n){void 0===n[t]&&"undefined"!==e.nullValueSeparator||(void 0===r[n[t]]?r[n[t]]=1:r[n[t]]=r[n[t]]+1)}),n=Object.getOwnPropertyNames(r).sort(function(t,e){return r[t]-r[e]}),d3.scale.ordinal().domain(n).rangePoints(g())}}()};return e.dimensions.forEach(function(n){l[n]=t[e.types[n]](n)}),e.hideAxis.forEach(function(n){l[n]=t[e.types[n]](n)}),u.rangePoints([0,a()],1),r.selection.selectAll("canvas").style("margin-top",e.margin.top+"px").style("margin-left",e.margin.left+"px").attr("width",a()+2).attr("height",o()+2),h.foreground.strokeStyle=e.color,h.foreground.lineWidth=1.4,h.foreground.globalCompositeOperation=e.composite,h.foreground.globalAlpha=e.alpha,h.brushed.strokeStyle=e.brushedColor,h.brushed.lineWidth=1.4,h.brushed.globalCompositeOperation=e.composite,h.brushed.globalAlpha=e.alpha,h.highlight.lineWidth=3,this},r.scale=function(t,e){return l[t].domain(e),this},r.flip=function(t){return l[t].domain(l[t].domain().reverse()),this},r.commonScale=function(t,n){var i=n||"number";void 0===t&&(t=!0);var a=e.dimensions.concat(e.hideAxis).filter(function(t){return e.types[t]==i});if(t){var o=d3.extent(a.map(function(t,e){return l[t].domain()}).reduce(function(t,e){return t.concat(e)}));a.forEach(function(t){l[t].domain(o)})}else a.forEach(function(t){l[t].domain(d3.extent(e.data,function(e){return+e[t]}))});return null!==e.bundleDimension&&r.bundleDimension(e.bundleDimension),this},r.detectDimensions=function(){return r.types(r.detectDimensionTypes(e.data)),r.dimensions(d3.keys(r.types())),this},r.toType=function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},r.toTypeCoerceNumbers=function(t){return parseFloat(t)==t&&null!=t?"number":r.toType(t)},r.detectDimensionTypes=function(t){var e={};return d3.keys(t[0]).forEach(function(n){e[n]=r.toTypeCoerceNumbers(t[0][n])}),e},r.render=function(){return e.dimensions.length||r.detectDimensions(),e.dimensions[0]in l||r.autoscale(),r.render[e.mode](),i.render.call(this),this},r.renderBrushed=function(){return e.dimensions.length||r.detectDimensions(),e.dimensions[0]in l||r.autoscale(),r.renderBrushed[e.mode](),i.render.call(this),this},r.render.default=function(){r.clear("foreground"),r.clear("highlight"),r.renderBrushed.default(),e.data.forEach(P)};var v=d3.renderQueue(P).rate(50).clear(function(){r.clear("foreground"),r.clear("highlight")});r.render.queue=function(){r.renderBrushed.queue(),v(e.data)},r.renderBrushed.default=function(){r.clear("brushed"),p()&&e.brushed.forEach(M)};var b=d3.renderQueue(M).rate(50).clear(function(){r.clear("brushed")});function x(t,n){var r=function(t){var n=t.length,r=e.smoothness,i=[];i.push(t[0]),i.push($V([t[0].e(1)+2*r*(t[1].e(1)-t[0].e(1)),t[0].e(2)]));for(var a=1;a<n-1;++a){var o=t[a],s=t[a-1],u=t[a+1],l=s.subtract(u);i.push(o.add(l.x(r))),i.push(o),i.push(o.subtract(l.x(r)))}return i.push($V([t[n-1].e(1)+2*r*(t[n-2].e(1)-t[n-1].e(1)),t[n-1].e(2)])),i.push(t[n-1]),i}(function(t){for(var n=[],r=e.dimensions,i=r.length,a=0;a<i;++a){var o=X(r[a]),s=l[r[a]](t[r[a]]);if(n.push($V([o,s])),a<i-1){var u=o+.5*(X(r[a+1])-o),c=s+.5*(l[r[a+1]](t[r[a+1]])-s);if(null!==e.bundleDimension){var d=.5*(e.clusterCentroids.get(l[e.bundleDimension](t[e.bundleDimension])).get(r[a])+e.clusterCentroids.get(l[e.bundleDimension](t[e.bundleDimension])).get(r[a+1]));c=d+(1-e.bundlingStrength)*(c-d)}n.push($V([u,c]))}}return n}(t));n.moveTo(r[0].e(1),r[0].e(2));for(var i=1;i<r.length;i+=3){if(e.showControlPoints)for(var a=0;a<3;a++)n.fillRect(r[i+a].e(1),r[i+a].e(2),2,2);n.bezierCurveTo(r[i].e(1),r[i].e(2),r[i+1].e(1),r[i+1].e(2),r[i+2].e(1),r[i+2].e(2))}}function y(t,n){n.beginPath(),null!==e.bundleDimension&&e.bundlingStrength>0||e.smoothness>0?x(t,n):w(t,n),n.stroke()}function A(){return"bottom"==e.nullValueSeparator?o()+1:"top"==e.nullValueSeparator?1:(console.log("A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'."),o()+1)}function w(t,n){e.dimensions.map(function(e,r){0==r?n.moveTo(X(e),void 0===t[e]?A():l[e](t[e])):n.lineTo(X(e),void 0===t[e]?A():l[e](t[e]))})}function M(t,n){return null!==e.brushedColor?h.brushed.strokeStyle=d3.functor(e.brushedColor)(t,n):h.brushed.strokeStyle=d3.functor(e.color)(t,n),y(t,h.brushed)}function P(t,n){return h.foreground.strokeStyle=d3.functor(e.color)(t,n),y(t,h.foreground)}function k(t,n){return h.highlight.strokeStyle=d3.functor(e.color)(t,n),y(t,h.highlight)}function S(t){r.svg.selectAll(".dimension");r.flip(t),d3.select(this.parentElement).transition().duration(1100).call(d.scale(l[t])),r.render()}function D(){var t=d3.event.deltaY;t=(t=t<0?-5:t)>0?5:t,e.dimensionTitleRotation+=t,r.svg.selectAll("text.label").attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),d3.event.preventDefault()}function N(t){return t in e.dimensionTitles?e.dimensionTitles[t]:t}r.renderBrushed.queue=function(){p()?b(e.brushed):b([])},r.shadows=function(){return s.shadows=!0,r.alphaOnBrushed(.1),r.render(),this},r.axisDots=function(t){t=t||.1;var n=r.ctx.marks,i=2*Math.PI;return n.globalAlpha=d3.min([1/Math.pow(e.data.length,.5),1]),e.data.forEach(function(r){e.dimensions.map(function(e,a){n.beginPath(),n.arc(X(e),l[e](r[e]),t,0,i),n.stroke(),n.fill()})}),this},r.clear=function(t){return h[t].clearRect(0,0,a()+2,o()+2),"brushed"===t&&p()&&(h.brushed.fillStyle=r.selection.style("background-color"),h.brushed.globalAlpha=1-e.alphaOnBrushed,h.brushed.fillRect(0,0,a()+2,o()+2),h.brushed.globalAlpha=e.alpha),this},d3.rebind(r,d,"ticks","orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),r.createAxes=function(){return n&&r.removeAxes(),(n=r.svg.selectAll(".dimension").data(e.dimensions,function(t){return t}).enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+u(t)+")"})).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(d.scale(l[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+e.dimensionTitleRotation+")",x:0,class:"label"}).text(N).on("dblclick",S).on("wheel",D),"top"==e.nullValueSeparator?r.svg.append("line").attr("x1",0).attr("y1",1+e.nullValueSeparatorPadding.top).attr("x2",a()).attr("y2",1+e.nullValueSeparatorPadding.top).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"):"bottom"==e.nullValueSeparator&&r.svg.append("line").attr("x1",0).attr("y1",o()+1-e.nullValueSeparatorPadding.bottom).attr("x2",a()).attr("y2",o()+1-e.nullValueSeparatorPadding.bottom).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"),s.axes=!0,this},r.removeAxes=function(){return n.remove(),this},r.updateAxes=function(){var t=r.svg.selectAll(".dimension").data(e.dimensions);if(t.enter().append("svg:g").attr("class","dimension").attr("transform",function(t){return"translate("+X(t)+")"}).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each(function(t){d3.select(this).call(d.scale(l[t]))}).append("svg:text").attr({"text-anchor":"middle",y:0,transform:"translate(0,-5) rotate("+e.dimensionTitleRotation+")",x:0,class:"label"}).text(N).on("dblclick",S).on("wheel",D),t.attr("opacity",0),t.select(".axis").transition().duration(1100).each(function(t){d3.select(this).call(d.scale(l[t]))}),t.select(".label").transition().duration(1100).text(N).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),t.exit().remove(),(n=r.svg.selectAll(".dimension")).transition().duration(1100).attr("transform",function(t){return"translate("+X(t)+")"}).style("opacity",1),r.svg.selectAll(".axis").transition().duration(1100).each(function(t){d3.select(this).call(d.scale(l[t]))}),s.brushable&&r.brushable(),s.reorderable&&r.reorderable(),"None"!==r.brushMode()){var i=r.brushMode();r.brushMode("None"),r.brushMode(i)}return this},r.reorderable=function(){return n||r.createAxes(),n.style("cursor","move").call(d3.behavior.drag().on("dragstart",function(t){c[t]=this.__origin__=u(t)}).on("drag",function(t){c[t]=Math.min(a(),Math.max(0,this.__origin__+=d3.event.dx)),e.dimensions.sort(function(t,e){return X(t)-X(e)}),u.domain(e.dimensions),r.render(),n.attr("transform",function(t){return"translate("+X(t)+")"})}).on("dragend",function(t){for(var n=0,a=e.dimensions.indexOf(t),o=this,s=this.parentElement;null!=(o=o.previousElementSibling);)++n;n!==a&&(i.axesreorder.call(r,e.dimensions),n>a?s.insertBefore(this,s.children[a-1]):a+1<s.children.length?s.insertBefore(this,s.children[a+1]):s.appendChild(this)),delete this.__origin__,delete c[t],d3.select(this).transition().attr("transform","translate("+u(t)+")"),r.render()})),s.reorderable=!0,this},r.reorder=function(t){var i=e.dimensions.slice(0);e.dimensions.sort(function(e,n){var r=l[e](t[e])-l[n](t[n]);return 0===r?e.localeCompare(n):r});var a=!1;if(i.some(function(t,n){return a=t!==e.dimensions[n]}),a){u.domain(e.dimensions);var o=e.highlighted.slice(0);r.unhighlight(),n.transition().duration(1500).attr("transform",function(t){return"translate("+u(t)+")"}),r.render(),0!==o.length&&r.highlight(o)}},r.adjacent_pairs=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push([t[n],t[n+1]]);return e};var E={modes:{None:{install:function(){return function(t){}}(),uninstall:function(){return function(t){}}(),selected:function(){return function(){return[]}}(),brushState:function(){return function(){return{}}}()}},mode:"None",predicate:"AND",currentMode:function(){return function(){return this.modes[this.mode]}}()};function O(t){e.brushed=t,i.brush.call(r,e.brushed),r.renderBrushed()}function R(t){if(!arguments.length)return E.predicate;if("AND"!==(t=String(t).toUpperCase())&&"OR"!==t)throw"Invalid predicate "+t;return E.predicate=t,e.brushed=E.currentMode().selected(),r.renderBrushed(),r}function X(t){var e=c[t];return null==e?u(t):e}return r.brushModes=function(){return Object.getOwnPropertyNames(E.modes)},r.brushMode=function(t){if(0===arguments.length)return E.mode;if(-1===r.brushModes().indexOf(t))throw"pc.brushmode: Unsupported brush mode: "+t;return t!==E.mode&&("None"!==E.mode&&r.brushReset(),E.modes[E.mode].uninstall(r),E.mode=t,E.modes[E.mode].install(),"None"===t?delete r.brushPredicate:r.brushPredicate=R),r},function(){var t={};function a(e){return!t[e].empty()}function o(){var n=e.dimensions.filter(a),r=n.map(function(e){return t[e].extent()});if(0===n.length)return e.data;var i={date:function(){return function(t,e,n){return"function"==typeof l[e].rangePoints?r[n][0]<=l[e](t[e])&&l[e](t[e])<=r[n][1]:r[n][0]<=t[e]&&t[e]<=r[n][1]}}(),number:function(){return function(t,e,n){return"function"==typeof l[e].rangePoints?r[n][0]<=l[e](t[e])&&l[e](t[e])<=r[n][1]:r[n][0]<=t[e]&&t[e]<=r[n][1]}}(),string:function(){return function(t,e,n){return r[n][0]<=l[e](t[e])&&l[e](t[e])<=r[n][1]}}()};return e.data.filter(function(t){switch(E.predicate){case"AND":return n.every(function(n,r){return i[e.types[n]](t,n,r)});case"OR":return n.some(function(n,r){return i[e.types[n]](t,n,r)});default:throw"Unknown brush predicate "+e.brushPredicate}})}function s(i){if(void 0===i){i={};return e.dimensions.forEach(function(e){var n=t[e];if(void 0!==n&&!n.empty()){var r=n.extent();r.sort(d3.ascending),i[e]=r}}),i}var a={};n.selectAll(".brush").each(function(t){a[t]=d3.select(this)}),e.dimensions.forEach(function(e){if(void 0!==i[e]){var n=t[e];void 0!==n&&(n.extent(i[e]),n(a[e]),n.event(a[e]))}}),r.renderBrushed()}function u(i){return e.brushed=!1,n&&(n.selectAll(".brush").each(function(e){d3.select(this).call(t[e].clear())}),r.renderBrushed()),this}E.modes["1D-axes"]={install:function(){return n||r.createAxes(),n.append("svg:g").attr("class","brush").each(function(n){d3.select(this).call(function(n){var a=d3.svg.brush();return a.y(l[n]).on("brushstart",function(){null!==d3.event.sourceEvent&&d3.event.sourceEvent.stopPropagation()}).on("brush",function(){O(o())}).on("brushend",function(){i.brushend.call(r,e.brushed)}),t[n]=a,a}(n))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),r.brushExtents=s,r.brushReset=u,r},uninstall:function(){return function(){n.selectAll(".brush").remove(),t={},delete r.brushExtents,delete r.brushReset}}(),selected:o,brushState:s}}(),function(){var t,n={};function s(){return function(){var r,i,a=d3.mouse(t[0][0]);a[0]=a[0]-e.margin.left,a[1]=a[1]-e.margin.top,i={p1:a,dims:r=function(t){var n={i:-1,left:void 0,right:void 0};return e.dimensions.some(function(r,i){if(u(r)<t[0]){var a=e.dimensions[i+1];return n.i=i,n.left=r,n.right=a,!1}return!0}),void 0===n.left?(n.i=0,n.left=e.dimensions[0],n.right=e.dimensions[1]):void 0===n.right&&(n.i=e.dimensions.length-1,n.right=n.left,n.left=e.dimensions[e.dimensions.length-2]),n}(a),minX:u(r.left),maxX:u(r.right),minY:0,maxY:o()},n[r.i]=i,n.active=r.i,i.p1[0]=Math.min(Math.max(i.minX,a[0]),i.maxX),i.p2=i.p1.slice()}}function c(){return function(){var t=d3.event,i=n[n.active];i.p2[0]=Math.min(Math.max(i.minX+1,t.x-e.margin.left),i.maxX),i.p2[1]=Math.min(Math.max(i.minY,t.y-e.margin.top),i.maxY),function t(e,n){var i=r.selection.select("svg").select("g#strums"),a=e.dims.i,o=[e.p1,e.p2],s=i.selectAll("line#strum-"+a).data([e]),u=i.selectAll("circle#strum-"+a).data(o),l=d3.behavior.drag();s.enter().append("line").attr("id","strum-"+a).attr("class","strum"),s.attr("x1",function(t){return t.p1[0]}).attr("y1",function(t){return t.p1[1]}).attr("x2",function(t){return t.p2[0]}).attr("y2",function(t){return t.p2[1]}).attr("stroke","black").attr("stroke-width",2),l.on("drag",function(n,r){var i=d3.event;e["p"+(r+=1)][0]=Math.min(Math.max(e.minX+1,i.x),e.maxX),e["p"+r][1]=Math.min(Math.max(e.minY,i.y),e.maxY),t(e,r-1)}).on("dragend",f()),u.enter().append("circle").attr("id","strum-"+a).attr("class","strum"),u.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",5).style("opacity",function(t,e){return void 0!==n&&e===n?.8:0}).on("mouseover",function(){d3.select(this).style("opacity",.8)}).on("mouseout",function(){d3.select(this).style("opacity",0)}).call(l)}(i,1)}}function d(){var t=Object.getOwnPropertyNames(n),r=e.data;function i(t,e){var r=n[e],i=function(t,e){var n=[t.p1[0]-t.minX,t.p1[1]-t.minX],r=[t.p2[0]-t.minX,t.p2[1]-t.minX],i=1-e/n[0],a=n[1]*(1-i),o=1-e/r[0],s=r[1]*(1-o);return function(t){var e=t[0],n=t[1],r=i*e+a,u=o*e+s;return n>Math.min(r,u)&&n<Math.max(r,u)}}(r,n.width(e)),a=r.dims.left,o=r.dims.right,s=l[a],u=l[o];return i([s(t[a])-r.minX,u(t[o])-r.minX])}return 0===(t=t.filter(function(t){return!isNaN(t)})).length?r:r.filter(function(n){switch(E.predicate){case"AND":return t.every(function(t){return i(n,t)});case"OR":return t.some(function(t){return i(n,t)});default:throw"Unknown brush predicate "+e.brushPredicate}})}function h(){var t=n[n.active],e=r.selection.select("svg").select("g#strums");delete n[n.active],n.active=void 0,e.selectAll("line#strum-"+t.dims.i).remove(),e.selectAll("circle#strum-"+t.dims.i).remove()}function f(){return function(){var t=e.data,a=n[n.active];a&&a.p1[0]===a.p2[0]&&a.p1[1]===a.p2[1]&&h(),t=d(),n.active=void 0,e.brushed=t,r.renderBrushed(),i.brushend.call(r,e.brushed)}}E.modes["2D-strums"]={install:function(){var i=d3.behavior.drag();n.active=void 0,n.width=function(t){var e=n[t];if(void 0!==e)return e.maxX-e.minX},r.on("axesreorder.strums",function(){var t=Object.getOwnPropertyNames(n).filter(function(t){return!isNaN(t)});t.length>0&&(t.forEach(function(t){var r=n[t].dims;n.active=t,function(t,n){var r=e.dimensions.length;return e.dimensions.some(function(i,a){return i===t&&a+a<r&&e.dimensions[a+1]===n})}(r.left,r.right)||h()}),f()())}),r.selection.select("svg").append("g").attr("id","strums").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),r.brushReset=function(t){return function(){Object.getOwnPropertyNames(t).filter(function(t){return!isNaN(t)}).forEach(function(e){t.active=e,h()}),f()()}}(n),i.on("dragstart",s()).on("drag",c()).on("dragend",f()),t=r.selection.select("svg").insert("rect","g#strums").attr("id","strum-events").attr("x",e.margin.left).attr("y",e.margin.top).attr("width",a()).attr("height",o()+2).style("opacity",0).call(i)},uninstall:function(){return function(){r.selection.select("svg").select("g#strums").remove(),r.selection.select("svg").select("rect#strum-events").remove(),r.on("axesreorder.strums",void 0),delete r.brushReset,t=void 0}}(),selected:d,brushState:function(){return function(){return n}}()}}(),function(){if("function"==typeof d3.svg.multibrush){var t={};E.modes["1D-axes-multi"]={install:function(){return n||r.createAxes(),n.append("svg:g").attr("class","brush").each(function(n){d3.select(this).call(function(n){var a=d3.svg.multibrush();return a.y(l[n]).on("brushstart",function(){null!==d3.event.sourceEvent&&d3.event.sourceEvent.stopPropagation()}).on("brush",function(){O(o())}).on("brushend",function(){O(o()),i.brushend.call(r,e.brushed)}).extentAdaption(function(t){t.style("visibility",null).attr("x",-15).attr("width",30)}).resizeAdaption(function(t){t.selectAll("rect").attr("x",-15).attr("width",30)}),t[n]=a,a}(n))}).selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),r.brushExtents=s,r.brushReset=u,r},uninstall:function(){return function(){n.selectAll(".brush").remove(),t={},delete r.brushExtents,delete r.brushReset}}(),selected:o,brushState:s}}function a(e){return!t[e].empty()}function o(){var n=e.dimensions.filter(a),r=n.map(function(e){return t[e].extent()});if(0===n.length)return e.data;var i={date:function(){return function(t,e,n,r){return"function"==typeof l[e].rangePoints?r[0]<=l[e](t[e])&&l[e](t[e])<=r[1]:r[0]<=t[e]&&t[e]<=r[1]}}(),number:function(){return function(t,e,n,r){return"function"==typeof l[e].rangePoints?r[0]<=l[e](t[e])&&l[e](t[e])<=r[1]:r[0]<=t[e]&&t[e]<=r[1]}}(),string:function(){return function(t,e,n,r){return r[0]<=l[e](t[e])&&l[e](t[e])<=r[1]}}()};return e.data.filter(function(t){switch(E.predicate){case"AND":return n.every(function(n,a){return r[a].some(function(r){return i[e.types[n]](t,n,a,r)})});case"OR":return n.some(function(n,a){return r[a].some(function(r){return i[e.types[n]](t,n,a,r)})});default:throw"Unknown brush predicate "+e.brushPredicate}})}function s(){var n={};return e.dimensions.forEach(function(e){var r=t[e];if(void 0!==r&&!r.empty()){var i=r.extent();n[e]=i}}),n}function u(i){return e.brushed=!1,n&&(n.selectAll(".brush").each(function(e){d3.select(this).call(t[e].clear())}),r.renderBrushed()),this}}(),function(){var t,n={};function s(){return function(){var r,i,a=d3.mouse(t[0][0]);a[0]=a[0]-e.margin.left,a[1]=a[1]-e.margin.top,i={p1:a,dims:r=function(t){var n={i:-1,left:void 0,right:void 0};return e.dimensions.some(function(r,i){if(u(r)<t[0]){var a=e.dimensions[i+1];return n.i=i,n.left=r,n.right=a,!1}return!0}),void 0===n.left?(n.i=0,n.left=e.dimensions[0],n.right=e.dimensions[1]):void 0===n.right&&(n.i=e.dimensions.length-1,n.right=n.left,n.left=e.dimensions[e.dimensions.length-2]),n}(a),minX:u(r.left),maxX:u(r.right),minY:0,maxY:o(),startAngle:void 0,endAngle:void 0,arc:d3.svg.arc().innerRadius(0)},n[r.i]=i,n.active=r.i,i.p1[0]=Math.min(Math.max(i.minX,a[0]),i.maxX),i.p2=i.p1.slice(),i.p3=i.p1.slice()}}function c(){return function(){var t=d3.event,i=n[n.active];i.p2[0]=Math.min(Math.max(i.minX+1,t.x-e.margin.left),i.maxX),i.p2[1]=Math.min(Math.max(i.minY,t.y-e.margin.top),i.maxY),i.p3=i.p2.slice(),function t(e,i){var a=r.selection.select("svg").select("g#arcs"),o=e.dims.i,s=[e.p2,e.p3],u=a.selectAll("line#arc-"+o).data([{p1:e.p1,p2:e.p2},{p1:e.p1,p2:e.p3}]),l=a.selectAll("circle#arc-"+o).data(s),c=d3.behavior.drag(),d=a.selectAll("path#arc-"+o).data([e]);d.enter().append("path").attr("id","arc-"+o).attr("class","arc").style("fill","orange").style("opacity",.5),d.attr("d",e.arc).attr("transform","translate("+e.p1[0]+","+e.p1[1]+")"),u.enter().append("line").attr("id","arc-"+o).attr("class","arc"),u.attr("x1",function(t){return t.p1[0]}).attr("y1",function(t){return t.p1[1]}).attr("x2",function(t){return t.p2[0]}).attr("y2",function(t){return t.p2[1]}).attr("stroke","black").attr("stroke-width",2),c.on("drag",function(r,i){var a,s=d3.event;e["p"+(i+=2)][0]=Math.min(Math.max(e.minX+1,s.x),e.maxX),e["p"+i][1]=Math.min(Math.max(e.minY,s.y),e.maxY),a=3===i?n.startAngle(o):n.endAngle(o),(e.startAngle<Math.PI&&e.endAngle<Math.PI&&a<Math.PI||e.startAngle>=Math.PI&&e.endAngle>=Math.PI&&a>=Math.PI)&&(2===i?(e.endAngle=a,e.arc.endAngle(a)):3===i&&(e.startAngle=a,e.arc.startAngle(a))),t(e,i-2)}).on("dragend",g()),l.enter().append("circle").attr("id","arc-"+o).attr("class","arc"),l.attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",5).style("opacity",function(t,e){return void 0!==i&&e===i?.8:0}).on("mouseover",function(){d3.select(this).style("opacity",.8)}).on("mouseout",function(){d3.select(this).style("opacity",0)}).call(c)}(i,1)}}function d(t,e){return Math.sqrt(t*t+e*e)}(function(){var t=Math.PI/180})(),function(){var t=180/Math.PI}();var h=function(){return function(t){var e=t;return t>Math.PI?(e=t-1.5*Math.PI,e=t-1.5*Math.PI):(e=t-.5*Math.PI,e=t-.5*Math.PI),-e}}();function f(){var t=Object.getOwnPropertyNames(n),r=e.data;function i(t,e){var r=n[e],i=function(t){var e=h(t.startAngle),n=h(t.endAngle);if(e>n){var r=e;e=n,n=r}return function(t){return t>=e&&t<=n}}(r),a=r.dims.left,o=r.dims.right,s=l[a],u=l[o],c=n.width(e),f=s(t[a])-u(t[o]),m=d(c,f);return i(Math.asin(f/m))}return 0===(t=t.filter(function(t){return!isNaN(t)})).length?r:r.filter(function(n){switch(E.predicate){case"AND":return t.every(function(t){return i(n,t)});case"OR":return t.some(function(t){return i(n,t)});default:throw"Unknown brush predicate "+e.brushPredicate}})}function m(){var t=n[n.active],e=r.selection.select("svg").select("g#arcs");delete n[n.active],n.active=void 0,e.selectAll("line#arc-"+t.dims.i).remove(),e.selectAll("circle#arc-"+t.dims.i).remove(),e.selectAll("path#arc-"+t.dims.i).remove()}function g(){return function(){var t=e.data,a=n[n.active];if(a&&a.p1[0]===a.p2[0]&&a.p1[1]===a.p2[1]&&m(),a){var o=n.startAngle(n.active);a.startAngle=o,a.endAngle=o,a.arc.outerRadius(n.length(n.active)).startAngle(o).endAngle(o)}t=f(),n.active=void 0,e.brushed=t,r.renderBrushed(),i.brushend.call(r,e.brushed)}}E.modes.angular={install:function(){var i=d3.behavior.drag();n.active=void 0,n.width=function(t){var e=n[t];if(void 0!==e)return e.maxX-e.minX},angle=function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=d(n,r);return Math.asin(r/i)},n.endAngle=function(t){var e=n[t];if(void 0!==e){var r=-angle(e.p1,e.p2)+Math.PI/2;return e.p1[0]>e.p2[0]&&(r=2*Math.PI-r),r}},n.startAngle=function(t){var e=n[t];if(void 0!==e){var r=-angle(e.p1,e.p3)+Math.PI/2;return e.p1[0]>e.p3[0]&&(r=2*Math.PI-r),r}},n.length=function(t){var e=n[t];if(void 0!==e)return d(e.p1[0]-e.p2[0],e.p1[1]-e.p2[1])},r.on("axesreorder.arcs",function(){var t=Object.getOwnPropertyNames(n).filter(function(t){return!isNaN(t)});t.length>0&&(t.forEach(function(t){var r=n[t].dims;n.active=t,function(t,n){var r=e.dimensions.length;return e.dimensions.some(function(i,a){return i===t&&a+a<r&&e.dimensions[a+1]===n})}(r.left,r.right)||m()}),g()())}),r.selection.select("svg").append("g").attr("id","arcs").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),r.brushReset=function(t){return function(){Object.getOwnPropertyNames(t).filter(function(t){return!isNaN(t)}).forEach(function(e){t.active=e,m()}),g()()}}(n),i.on("dragstart",s()).on("drag",c()).on("dragend",g()),t=r.selection.select("svg").insert("rect","g#arcs").attr("id","arc-events").attr("x",e.margin.left).attr("y",e.margin.top).attr("width",a()).attr("height",o()+2).style("opacity",0).call(i)},uninstall:function(){return function(){r.selection.select("svg").select("g#arcs").remove(),r.selection.select("svg").select("rect#arc-events").remove(),r.on("axesreorder.arcs",void 0),delete r.brushReset,t=void 0}}(),selected:f,brushState:function(){return function(){return n}}()}}(),r.interactive=function(){return s.interactive=!0,this},r.xscale=u,r.yscale=l,r.ctx=h,r.canvas=f,r.g=function(){return n},r.resize=function(){return r.selection.select("svg").attr("width",e.width).attr("height",e.height),r.svg.attr("transform","translate("+e.margin.left+","+e.margin.top+")"),s.brushable&&r.brushReset(),r.autoscale(),n&&r.createAxes(),s.brushable&&r.brushable(),s.reorderable&&r.reorderable(),i.resize.call(this,{width:e.width,height:e.height,margin:e.margin}),this},r.highlight=function(t){return 0===arguments.length?e.highlighted:(e.highlighted=t,r.clear("highlight"),d3.selectAll([f.foreground,f.brushed]).classed("faded",!0),t.forEach(k),i.highlight.call(this,t),this)},r.unhighlight=function(){return e.highlighted=[],r.clear("highlight"),d3.selectAll([f.foreground,f.brushed]).classed("faded",!1),this},r.intersection=function(t,e,n,r){return{x:((t.x*e.y-t.y*e.x)*(n.x-r.x)-(t.x-e.x)*(n.x*r.y-n.y*r.x))/((t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x)),y:((t.x*e.y-t.y*e.x)*(n.y-r.y)-(t.y-e.y)*(n.x*r.y-n.y*r.x))/((t.x-e.x)*(n.y-r.y)-(t.y-e.y)*(n.x-r.x))}},r.version="0.7.0",r.toString=function(){return"Parallel Coordinates: "+e.dimensions.length+" dimensions ("+d3.keys(e.data[0]).length+" total) , "+e.data.length+" rows"},r},d3.renderQueue=function(t){var e=[],n=10,r=function(){return function(){}}(),i=0,a=function(){return function t(e){e&&t.data(e),t.invalidate(),r(),t.render()}}();return a.render=function(){i=0;var r=!0;a.invalidate=function(){r=!1},d3.timer(function(){if(!r)return!0;if(i>e.length)return!0;for(var a=Math.min(i+n,e.length),o=i;o<a;o++)t(e[o],o);i+=n})},a.data=function(t){return a.invalidate(),e=t.slice(0),a},a.rate=function(t){return arguments.length?(n=t,a):n},a.remaining=function(){return e.length-i},a.clear=function(t){return arguments.length?(r=t,a):(r(),a)},a.invalidate=function(){},a}},2781:function(t,e,n){"use strict";t.exports=function(t){var e=[],n=function(){return function t(n){0==e.length&&(e=d3.keys(n.data()[0][0])),n.selectAll(".header").data([!0]).enter().append("div").attr("class","header");var r=n.select(".header").selectAll(".cell").data(e);r.enter().append("div").attr("class",function(t,e){return"col-"+e}).classed("cell",!0),n.selectAll(".header .cell").text(function(t){return t}),r.exit().remove();var i=n.selectAll(".row").data(function(t){return t});i.enter().append("div").attr("class","row"),i.exit().remove();var a=n.selectAll(".row").selectAll(".cell").data(function(t){return e.map(function(e){return t[e]})});return a.enter().append("div").attr("class",function(t,e){return"col-"+e}).classed("cell",!0),a.exit().remove(),n.selectAll(".cell").text(function(t){return t}),t}}();return n.columns=function(t){return arguments.length?(e=t,this):e},n}}}]);