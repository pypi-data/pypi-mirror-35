

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Concurrent writes &mdash; django-bulkmodel 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Connection Management" href="connection-management.html" />
    <link rel="prev" title="2. Bulk Updates" href="bulk-update.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> django-bulkmodel
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-all-features.html">Overview of All Features</a></li>
</ul>
<p class="caption"><span class="caption-text">In-Depth Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="bulk-create.html">1. Bulk Create</a></li>
<li class="toctree-l1"><a class="reference internal" href="bulk-update.html">2. Bulk Updates</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Concurrent writes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parameters">3.1. Parameters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="connection-management.html">4. Connection Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="copy-to-from.html">5. Copy TO / FROM support</a></li>
<li class="toctree-l1"><a class="reference internal" href="signals.html">6. Signals</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/queryset.html">QuerySet API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/signals.html">Signals API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/helpers.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/concurrency-executor.html">Concurrency Executor</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">django-bulkmodel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>3. Concurrent writes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/ailling/django-bulkmodel/blob/masterpages/concurrent-writes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="concurrent-writes">
<h1>3. Concurrent writes<a class="headerlink" href="#concurrent-writes" title="Permalink to this headline">¶</a></h1>
<p>Django comes with a <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> parameter on the <code class="docutils literal notranslate"><span class="pre">bulk_create</span></code> queryset method.</p>
<p>Django-bulkmodel expands on the concept of batching in two ways:</p>
<ul class="simple">
<li>Batching is enabled on all write methods, including <code class="docutils literal notranslate"><span class="pre">update()</span></code> and <code class="docutils literal notranslate"><span class="pre">update_fields()</span></code></li>
<li>You can optionally write data concurrently and specify a number of workers that makes sense for your database server and data size</li>
</ul>
<p>Note that performance of concurrent writes won’t increase linearly. In fact, if your database is constrained
with CPU resources, it’s not likely to impact performance at all and could actually slow down your write.</p>
<p>This is an advanced feature that should be used with care. However you can improve write performance dramatically
when used correctly.</p>
<div class="section" id="parameters">
<h2>3.1. Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>All database write methods have the following options to control concurrent writes:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">concurrent</span></code>: Set to true to enable concurrent writes. False by default</li>
<li><code class="docutils literal notranslate"><span class="pre">batch_size</span></code>: Number of records to include in a single write (applies whether writing synchronous or asynchronous)</li>
<li><code class="docutils literal notranslate"><span class="pre">max_concurrent_workers</span></code>: Maximum number of concurrent writers to use to apply the database operation</li>
</ul>
<hr class="docutils" />
<p>See <a class="reference internal" href="../reference/queryset.html"><span class="doc">Queryset API Reference</span></a> for more details.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="connection-management.html" class="btn btn-neutral float-right" title="4. Connection Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bulk-update.html" class="btn btn-neutral" title="2. Bulk Updates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Alan Illing.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>