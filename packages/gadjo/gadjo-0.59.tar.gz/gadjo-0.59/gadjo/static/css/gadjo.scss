@import 'opensans';
@import 'utils';

$mobile-limit: 760px;
$font-family: "Open Sans", sans-serif;

/* generalities */

html, body {
	margin: 0;
	font-family: $font-family;
	font-size: 12px;
	@media screen and (min-width: 1260px) {
		font-size: 13px;
	}
	background: #f2f2f2;
	color: #3c3c33;
}

html {
	min-height: 100%;
	position: relative;
}

body {
	height: 100%;
}

a {
	color: #0066cc;
	text-decoration: none;
	border-width: 0;
	border-bottom: 1px dotted #ff9900;
	@include vendor-prefix('transition', 'color 200ms ease-out');
	&:hover {
		color: #003388;
		border-style: solid;
	}
	img {
		border: 0;
	}
	&.disabled {
		color: #aaa;
		border: none;
		cursor: default;
	}
}

dl dt {
	margin : 0;
	padding : 0 0 0 0;
}

dl dd {
	margin : 0.3em 0 1.5em 10px;
}

span.error-message {
	color: #e00;
	font-weight: bold;
}

span.warning {
	background-color: orange;
}

.clear {
	clear: both;
}


/* from top to bottom */

/* top bar */

div#top {
	color: #eee;
	height: 0px;
}

div#top a {
	color: #aaa;
	font-weight: normal;
	border: 0;
	&:hover {
		color: #888;
	}
}

ul.user-info {
	margin: 0;
	padding: 0;
	padding-right: 3em;
	font-size: 85%;
	font-weight: bold;
	position: absolute;
	top: 0px;
	right: 0px;
	z-index: 10;
	background: #23282d url(texture.png);
	height: 40px;
	line-height: 40px;
	li {
		display: inline;
		padding-left: 3em;
	}
}

/* header */

$header-height: 40px;

div#header {
	background: #C2D1CC url(header-03.jpeg);
	background-size: 100% 500px;
	padding-left: 0px;
	border-bottom: 1px solid #888;
	position: relative;
	height: $header-height;
}

div#header h1 {
	height: $header-height;
	line-height: $header-height;
	padding: 0 ($header-height + 1px) 0 20px;
	margin: 0;
	font-weight: normal;
	color: black;
	text-shadow: 0 0 2px white;
	display: inline-block;
	z-index: 100;
	max-width: 80%;
	width: 80%;
	max-width: calc(100% - #{$header-height} - 21px);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	@include vendor-prefix('transition', 'all ease 200ms');
	opacity: 0.5;

	a {
		color: inherit;
		border-bottom: none;
		display: inline-block;
		padding: 0 11px;
		position: relative;
		margin-left: -5px;
		padding-left: 20px;
		&:first-child {
			padding-left: 0;
		}
	}

	&:hover {
		opacity: 0.7;
	}

	a:hover {
		opacity: 1;
		text-shadow: 0 0 0px #333;
	}
}

div#header h1.breadcrumbs {
	a:last-child {
		/* hide last breadcrumb item (== current page) */
		display: none;
	}

	span.separator {
		display: none;
	}

	a::after {
		content: "";
		height: 42px;
		width: 42px;
		@include vendor-prefix('transform', 'scale(0.4, 0.707) rotate(45deg)');
		display: inline-block;
		position: absolute;
		top: 0px;
		right: -21px;
		box-shadow: 1px -1px 0px 1px #bbb, 2px -2px 0px 2px white;
		z-index: 100;
		border-width: 1px 1px 0 0;
	}
}

body[data-environment-label] span#applabel {
	background-image: repeating-linear-gradient(-45deg, #333, black 14px, #ffe761 15px, #ffe761 29px, black 30px);
	color: white;
	text-shadow: 0 0 1px black;
}

/* notifications */

ul.messages {
	padding: 0;
	margin: 0;
	list-style-type: none;
	max-width: 100ex;
	position: relative;

	li {
		font-size: 110%;
		background: #fafafa;
		margin: 1ex 0;
		padding: 1ex;
		border: 1px solid transparent;
		border-left-width: 25px;
		&:before {
			position: absolute;
			left: 0;
			width: 25px;
			display: inline-block;
			text-align: center;
			font-family: FontAwesome;
			color: white;
		}
		&.success {
			&:before { content: "\f058"; } /* check-circle */
			border-color: #00b000;
		}
		&.info {
			&:before { content: "\f05a"; } /* info-circle */
			border-color: #0000b0;
		}
		&.warning {
			&:before { content: "\f071"; } /* exclamation-triangle */
			border-color: #ffb000;
		}
		&.error {
			&:before { content: "\f06a"; } /* exclamation-circle */
			border-color: #b00000;
		}
		.close {
			float: right;
			cursor: pointer;
			font-weight: bold;
			border: none;
			color: inherit;
		}
	}
}

div.infonotice,
div.successnotice,
div.warningnotice,
div.errornotice {
	position: relative;
	font-size: 110%;
	background: #fafafa;
	color: #3c3c33;
	font-weight: normal;
	margin: 1ex 0;
	padding: 1ex;
	border: 1px solid transparent;
	border-left-width: 25px;
	&::before {
		position: absolute;
		top: 0.8rem;
		left: -25px;
		width: 25px;
		display: inline-block;
		text-align: center;
		font-family: FontAwesome;
		color: white;
	}
	&.successnotice {
		&:before { content: "\f058"; } /* check-circle */
		border-color: #00b000;
	}
	&.infonotice {
		&:before { content: "\f05a"; } /* info-circle */
		border-color: #0000b0;
	}
	&.warningnotice {
		&:before { content: "\f06a"; } /* exclamation-circle */
		border-color: #ffb000;
	}
	&.errornotice {
		&:before { content: "\f071"; } /* exclamation-triangle */
		border-color: #b00000;
	}
}

/* main content */

#main {
	display: -ms-flexbox;
	display: flex;
	@media screen and (max-width: $mobile-limit) {
		-ms-flex-direction: column;
		flex-direction: column;
	}
	@media print {
		display: block;
	}
}

div#main-content {
	-ms-flex: 1 1 auto;
	flex: 1 1 auto;
	width: 100%;
	margin-left: 0;
	padding: 1em 6px 0 16px;
	border: 1px solid #ccc;
	border-width: 0 1px 1px 0;
	background: white;
	position: relative;
	overflow-x: auto;
	overflow-y: hidden;
	box-sizing: border-box;
	@media screen and (max-width: $mobile-limit) {
		border-width: 0 0 1px 0;
	}
}

#sidebar {
	-ms-flex: 0 0 auto;
	flex: 0 0 auto;
	margin-left: 1rem;
	margin-right: 1rem;
	width: 23rem;
	max-width: 23rem;
	@media screen and (max-width: $mobile-limit) {
		width: auto;
		max-width: 100%;
	}
	color: #666;
	position: relative;
}


div#main-content h2 {
	font-weight: normal;
}

/* breadcrumb */

div#more-user-links {
	font-size: 110%;
}

div#more-user-links a,
div#more-user-links a:after {
	background: #ccc;
	text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
	border: 1px solid #bbb;
	@include vendor-prefix('transition', 'background 0.5s');
}

div#more-user-links a {
	box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 1px 2px rgba(0,0,0,.05);
	padding: 4px 12px;
	border-radius: 2px;
	text-decoration: none;
	font-size: 90%;
	color: black;
}

span#breadcrumb {
	display: inline-block;
	margin: 1ex 0;
}

span#breadcrumb a {
	display: inline-block;
	padding-left: 20px;
	position: relative;
	height: 14px;
	margin-left: -4px;
}

span#breadcrumb a:first-child {
	margin-left: 0;
	padding-left: 16px;
}

span#breadcrumb a:after {
	content: "";
	height: 22px;
	width: 22px;
	@include vendor-prefix('transform', 'scale(0.4, 0.707) rotate(45deg)');
	display: inline-block;
	position: absolute;
	top: 0px;
	right: -11px;
	box-shadow: 1px -1px 0px 1px #bbb, 2px -2px 0px 2px white;
	z-index: 100;
	border-width: 1px 1px 0 0;
}

div#more-user-links a:hover,
div#more-user-links a:hover:after {
	text-decoration: underline;
	background: #aaa;
}

/* page content */

div#content {
	margin: 0 1ex 1em 0;
	padding: 0px;
	position: relative;
}

div#main-content > h2,
div#appbar > h2,
div#main-content .top-title h2,
div#content h2 {
	margin-top: 0;
	font-weight: normal;
	color: #656551;
	font-size: 200%;
	letter-spacing: -1px;
	line-height: 25px;
	margin-bottom: 20px;
	padding: 0 0 10px 0px;
	position: relative;
	top: 4px;
	border-bottom: 1px dotted #d8d8d8;
}

table.main {
	width: 100%;
	border: 1px solid #bcbcbc;
	border-collapse: collapse;
}

table.main th {
	font-weight: normal;
	padding: 1em 1ex;
	border-bottom: 1px solid #bcbcbc;
	background: #f0f0f0;
}

table.main td {
	text-align: center;
	padding: 1em 1ex;
	border-bottom: 1px solid #bcbcbc;
	@include vendor-prefix('transition', 'background ease 0.2s');
}

table.main tr td.checkbox {
	width: 1em;
}

table.main tr:nth-child(even) td {
	background: #f8f8f8;
}

table.main tr:hover td {
	background: #eee;
	cursor: pointer;
}

table.main tr.active td {
	background: #bbf;
}

td.price {
	text-align: right;
}

/* zone selection */

ul.apps {
	margin-top: 2em;
	margin-bottom: 2em;
	padding: 0;
	&::after {
		content: "";
		display: block;
		clear: both;
	}
}

ul.apps li {
	display: table;
	float: left;
	margin-right: 1em;
	margin-bottom: 1em;
}

ul.apps li a {
	background-color: transparent;
	background-repeat: no-repeat;
	background-position: 50% 50%;
	display: table-cell;
	vertical-align: bottom;
	width: 120px;
	height: 100px;
	padding-top: 10px;
	padding-bottom: 10px;
	font-weight: bold;
	text-align: center;
	border: 1px solid #ccc;
	text-decoration: none;
	@include vendor-prefix('transition', 'all .2s ease-in-out');
	color: #FF7800;
	border-radius: 15px;
}

ul.apps li a:hover {
	border: 1px solid #333;
	color: #FF7800;
	border-radius: 25px;
}

/* Combo specific class */
div.cell.shown-because-admin {
	opacity: 0.5;
	background-image: repeating-linear-gradient(-45deg, #eee 0px, #eee 14px, transparent 15px, transparent 30px);
	&:hover {
		opacity: 1;
		background-image: inherit;
	}
}

/* footer */

div#footer {
	clear: both;
	margin-left: 2%;
	font-size: 60%;
	width: 96%;
}

/* icons */

[class^="icon-"]:after, [class*=" icon-"]:after,
[class^="icon-"]:before, [class*=" icon-"]:before {
	font-family: FontAwesome;
	font-weight: normal;
	font-style: normal;
	display: inline-block;
	text-decoration: none;
}
a[class^="icon-"], a[class*=" icon-"] {
	display: inline-block;
	text-decoration: none;
	border: none;
	&.disabled {
		color: #aaa;
		border: none;
		cursor: default;
	}
}

.icon-home-space:before           { content: "\f015\00a0\00a0"; }
.icon-remove-sign:before          { content: "\f057"; }
.icon-add-sign:before             { content: "\f067"; }
.icon-minus-sign:before             { content: "\f068"; }

/* misc */

div#content div.bo-block {
	margin-left: 0;
}

div.bo-block {
	border: 1px solid #e4e4e4;
	background: #fcfcfc;
	color: #505050;
	margin: 1em 0;
	padding: 1ex;
}

div.bo-block h2 {
	margin: 0;
	border-bottom: 1px solid #bcbcbc;
	color: #474747;
}

div.dimmed-block h2 {
	color: #808080;
}

div.bo-block ul {
	padding-left: 2em;
	padding-bottom: 1ex;
}

div.big-msg-info {
	background: transparent url(../images/info-icon.png) 5px 5px no-repeat;
	width: 30em;
	padding-left: 90px;
	margin: 3em auto;
	min-height: 90px;
	padding-top: 20px;
}

p.paginator {
	margin: 4ex 0;
}

p.paginator *:first-child {
	border-radius: 3px 0 0 3px;
}

p.paginator *:last-child {
	border-radius: 0 3px 3px 0;
}

p.paginator a,
p.paginator span {
	padding: 1.5ex 1.7ex 1ex 1.7ex;
	border: 1px solid #BCBCBC;
	margin: 0 0 0 -1px;
}

p.paginator span.this-page {
	background: #5B616B;
	border-color: #5B616B;
	color: white;
}

p.paginator span.this-page + a {
	border-left-color: #5B616B;
}

p.paginator a:hover {
	background: #eee;
}

ul.objects-list {
	margin: 1em 0;
	padding: 0;
}

ul.objects-list li {
	list-style: none;
	margin: 0 0 -1px 0;
	padding: 0 0.5ex 0 2ex;
	border: 1px solid #aaa;
	clear: both;
	position: relative;
	min-height: 2.5em;
	line-height: 2.5em;
	break-inside: avoid;
}

ul.objects-list.single-links li {
	padding: 0;
	@include vendor-prefix('transition', 'background ease 0.2s');
}

ul.objects-list li:hover {
	background: #eee;
}

ul.objects-list.single-links li a {
	display: block;
	border: none;
	padding: 0 0.5ex 0 2ex;
	&.link-action-icon, &.delete {
		height: 100%;
		position: absolute;
		right: 0;
		padding-right: 2ex;
		top: 0;
		width: 1em;
		overflow: hidden;
		&::before {
			font-family: FontAwesome;
			padding-right: 3em;
		}
	}
	&.delete::before {
		content: "\f057"; /* remove-sign */
	}
}

ul.objects-list li span.badge {
	position: absolute;
	right: 1ex;
	top: 0.25em;
	height: 2em;
	box-sizing: border-box;
	border-radius: 1ex;
	padding: 0 1ex;
	background: #ad7c6d;
	color: white;
	line-height: 2em;
}

/* widgets & dialogs */

input[type="submit"][name="submit"] {
	background: #283c54;
	background-image: linear-gradient(to bottom, #1cabe7, #1999cd);
	color: white;
	border-color: #267dae;
}

input[type=submit]:hover {
	border-color: #666;
}

#sidepage {
	position: absolute;
	top: 0px;
	z-index: 100;
	width: 36px;
	height: 2em;
	text-align: left;
	@include vendor-prefix('transition', 'width 0ms ease-in');
	height: 100%;
	overflow: initial;
	background: #23282d url(texture.png);
}

body[data-has-sidepage] #header,
body[data-has-sidepage] #main {
	margin-left: 36px;
}

body.sidepage-expanded #header,
body.sidepage-expanded #main {
	margin-left: 30ex;
}

body.enable-transitions {
	#header,
	#main,
	#main div#header h1,
	#sidepage ul#sidepage-menu,
	#sidepage span#applabel,
	#sidepage {
		@include vendor-prefix('transition-duration', '400ms');
	}
}

body.sidepage-expanded #sidepage {
	height: 100%;
	overflow: initial;
	width: 30ex;
}

#sidepage ul#sidepage-menu {
	transform: scale(1);
}

#header,
#main {
	@include vendor-prefix('transition', 'margin-left 0ms ease-in');
	position: relative;
}

#sidepage span#applabel {
	visibility: hidden; /* will be turned visible by publik.js */

	padding-left: 0.5rem;
	font-weight: bold;
	cursor: pointer;
	display: block;
	position: relative;
	overflow: hidden;
	@include vendor-prefix('transition', 'max-width 0ms ease-in');
	height: 40px;
	line-height: 40px;
	font-weight: normal;
	font-size: 20px;
	border-bottom: 1px solid #666;

	&:hover {
		color: #fff;
	}
}

#sidepage span#applabel::before {
	font-family: FontAwesome;
	content: "\f18e"; /* fa-arrow-circle-o-right */
	padding-left: 2px;
	padding-right: 12px;
}

body.sidepage-expanded #sidepage span#applabel::before {
	content: "\f190"; /* fa-arrow-circle-o-left */
}

body.sidepage-expanded #sidepage span#applabel {
	overflow: hidden;
	max-width: 100%;
}

#sidepage ul#sidepage-menu {
	list-style: none;
	padding: 0;
	padding-top: 1em;
	margin: 0;
	background: #23282d url(texture.png);
	min-height: 100%;
	min-height: calc(100% - 41px); /* #top 40px + border 1px */
	box-sizing: border-box;
	@include vendor-prefix('transition', 'all 0ms ease');
}

#sidepage ul#sidepage-menu a {
	border: none;
	display: block;
	white-space: nowrap;
	text-overflow: ellipsis;
	overflow: hidden;
}

#sidepage ul#sidepage-menu li {
	position: relative;
	line-height: 24px;
}

ul#sidepage-menu li a {
	background: transparent no-repeat 7px 50%;
	padding: 5px 0 5px 37px;
}

#sidepage ul#sidepage-menu .active a {
	color: #eee;
}

#sidepage ul#sidepage-menu li.active,
#sidepage ul#sidepage-menu li.active:hover {
	background: #215D9C;
}

#sidepage ul#sidepage-menu li:after {
	background: rgba(0, 0, 0, 0.3);
	content: "";
	position: absolute;
	z-index: -1;
	@include vendor-prefix('transition', 'all 0.2s ease');
	box-sizing: border-box;
	width: 0;
	width: 0%; height: 100%; top: 0; left: 0;
}

#sidepage ul#sidepage-menu li:hover:after {
	width: 100%;
	height: 100%;
}

#sidepage ul#sidepage-menu li.active:after {
	content: "";
	position: absolute;
	display: block;
	top: 0;
	background: white;
	z-index: 5;
	right: -17px;
	left: auto;
	width: 34px;
	height: 34px;
	@include vendor-prefix('transform', 'scale(0.2, 0.2) rotate(45deg)');
}

@media screen and (max-width: $mobile-limit) {
	body #main {
		margin-top: 0px;
	}
	ul.user-info {
		z-index: 100;
	}
	#sidepage {
		@include vendor-prefix('transition', 'height 400ms ease-in');
		height: 41px;
		width: 100%;
		overflow: hidden;
		span#applabel::before {
			content: "\f0c9"; /* fa-bars */
			width: 1em;
			display: inline-block;
		}
	}
	body.sidepage-expanded #sidepage {
		height: 100%;
		width: 100%;
		span#applabel::before {
			content: "\f00d"; /* fa-times */
		}
	}
	body[data-has-sidepage] #main,
	body.sidepage-expanded #main {
		margin-left: 0;
	}
	#sidepage ul#sidepage-menu li {
		float: left;
		width: 50%;
		a {
			padding: 4ex 1ex 1ex 1ex;
			text-align: center;
			background-position: 50% 1ex;
		}
		&::after {
			@include vendor-prefix('transition', 'none');
		}
		&.active::after {
			content: none;
		}
	}
}

#gadjo-ajax-error {
	position: fixed;
	right: 1em;
	bottom: 1em;
	max-width: 30em;
	background: rgb(255, 34, 34) none repeat scroll 0% 0%;
	padding: 1ex;
	font-weight: bold;
	color: white;
	border: 1px solid red;
	box-shadow: 0px 0px 4px red;
	border-radius: 2px;
}

div.old-ie-warning {
	background: #ffd800;
	padding: 1em;
}

div.old-ie-warning p {
	margin: 0;
	line-height: 150%;
}

$appicons: add, announces, book, calendar, categories, clock, counter, facturier, forms, gis, grid, home, mail, management, organizational-units, passerelle, password, phone, portal, porte-doc, roles, security, services, settings, statistics, submission, system, texts, theme, users, workflows;

@each $appicon in $appicons {
	ul#sidepage-menu li a.icon-#{$appicon} { background-image: url(icons/#{$appicon}.small.png); }
	ul.apps li.icon-#{$appicon} a { background-image: url(icons/#{$appicon}.large.png); }
	ul.apps li.icon-#{$appicon} a:hover { background-image: url(icons/#{$appicon}.large-hover.png); }
}

@media print {
	div#top,
	span#breadcrumb,
	div#header,
	#sidepage-menu {
		display: none;
	}
	body.sidepage-expanded #main { margin: 0; }

	div#header h1 {
		text-shadow: none;
	}
}

#appbar {
	position: relative;
	& > a {
		position: relative;
		top: -45px;
		float: right;
		margin-left: 2em;
	}
	span.actions {
		position: absolute;
		bottom: 8px;
		right: 0;
		a {
			float: right;
			margin-left: 2em;
		}
	}
	.extra-actions-menu-opener {
		border: none;
		&::before {
			cursor: pointer;
			content: "\f142"; /* ellipsis-v */
			font-family: FontAwesome;
			font-size: 140%;
			padding: 2px 1ex;
			margin-right: -0.5ex;
			border: 1px solid transparent;
			border-bottom: 0;
			position: relative;
			z-index: 200;
			top: 2px;
		}
		&.open::before {
			background: #fafafa;
			border-color: #d0d0d0;
		}
	}
	.extra-actions-menu {
		background: white;
		padding: 0px;
		list-style: none;
		position: absolute;
		right: -7px;
		margin-top: -24px;
		border: 1px solid #d0d0d0;
		background: #fafafa;
		box-shadow: 0px 1px 1px 2px rgba(0, 0, 0, 0.04);
		z-index: 100;
		display: none;
		min-width: 12em;
		&.open {
			display: block;
		}
		li {
			margin: 0;
			a {
				float: none;
				display: block;
				margin: 0;
				padding: 5px 10px;
				border: none;
				&:hover {
					background: #ccc;
				}
			}
		}
	}
	span.actions {
		.extra-actions-menu {
			margin-top: 2px;
			top: 100%;
		}
	}
}

div.section {
	margin: 1em 0;
	border: 1px solid #bcbcbc;
	> h2, > h3 {
		font-weight: normal;
		font-size: 120%;
		color: #444;
		background: #FCFCFC;
		border-bottom: 1px solid #bcbcbc;
		padding: 1rem;
		margin-top: 0;
		margin-bottom: 0;
	}
	> div, > dl {
		padding: 1rem;
		> ul.objects-list {
			padding-left: 0;
		}
		> ul {
			margin-left: 0;
			padding-left: 2rem;
		}
	}
	h4 {
		padding-bottom: 3px;
		border-bottom: 1px solid #bcbcbc;
	}
	&.foldable {
		> h2, > h3 {
			cursor: pointer;
			&::after {
				content: "▼";
				font-size: 80%;
				text-align: right;
				float: right;
				transition: transform ease 0.1s;
			}
		}
		&.folded {
			> h2, > h3 {
				border-bottom: none;
				&::after {
					transform: rotate(-90deg);
				}
			}
			> div, > dl {
				display: none;
			}
		}
	}
	> div > ul.objects-list:first-child:last-child { // single child
		margin: calc(-1rem - 1px);
	}
}

.varname {
	color: #444;
}

@import 'grid';
@import 'jqueryui';
@import 'forms';
