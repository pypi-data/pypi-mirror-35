<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>COS Aspera Library 0.9 API: COS Aspera Library 0.9 API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">COS Aspera Library 0.9 API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">COS Aspera Library 0.9 API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>COS Aspera is a library that enables you to transfer files to your storage instance using the ascp command line utility and ATS transfer technology.</p>
<p>It can do the following:</p><ul>
<li>Initiate FASP uploads and downloads (transfers) to and from your storage instance</li>
<li>Monitor transfer progress and other statistics for FASP transfers</li>
<li>Change the transfer rate and adaptive policy on-the-fly (while a transfer is running)<ul>
<li>Authenticate a transfer</li>
<li>Cancel a transfer</li>
</ul>
</li>
</ul>
<h2>Background</h2>
<p>Each FASP file transfer runs as its own process (ascp), which reports statistics to interested applications through a local port. By default, COS Aspera only manage transfers it initiates. To start a transfer using COS Aspera, create a transfer spec and submit it with the startTransfer API. To receive transfer event notifications, register a callback object derived from ITransferReporter before starting the transfer. With each notification, you receive the current statistics of the session as well as the statistics for the last transferred file, if available</p>
<h2>Aspera Events (received via callback)</h2>
<h3>INIT</h3>
<p>Sent after socket is opened.</p>
<h4>Fields:</h4>
<ul>
<li>Type: INIT</li>
<li>Direction: Direction of transfer (Send | Receive).</li>
<li>Operation: Indicates a transfer or just a bandwidth measurement (Transfer | BWMeasurement).</li>
<li>SessionId: Unique identifier for this session.</li>
<li>UserStr: Application-specified identifier.</li>
<li>Cookie: Application-specified string.</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: INIT</li>
<li>Direction: Send</li>
<li>Operation: Transfer</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>UserStr: 5492958869869553497</li>
<li>Cookie: My data</li>
</ul>
<h3>SESSION</h3>
<p>Sent after SSH has connected and ascp processes have negotiated.</p>
<h4>Fields:</h4>
<ul>
<li>Type: SESSION</li>
<li>Adaptive: Transfer policy (Adaptive | Fixed | Trickle).</li>
<li>Priority: Transfer priority (1: high | 2: regular).</li>
<li>Cookie: Application-specified string.</li>
<li>Destination: Path where files will transfer to.</li>
<li>Direction: Direction of transfer (Send | Receive).</li>
<li>Encryption: Use encryption (Yes) or not (No).</li>
<li>Host: Remote server address.</li>
<li>Operation: Indicates a transfer or just a bandwidth measurement (Transfer | BWMeasurement | Stream).</li>
<li>Port: UDP port for fasp.</li>
<li>Rate: Target rate (Kbps|%) (% in case it is non-zero in the context of bw measurement).</li>
<li>MinRate: Minimum rate (Kbps|%) (% in case it is non-zero in the context of bw measurement).</li>
<li>Remote: Is this process acting as the server (Yes) or the client (No).</li>
<li>RateCap: Maximal target rate allowed (enforced by server).</li>
<li>MinRateCap: Maximal minimum rate allowed (enforced by server).</li>
<li>PolicyCap: Transfer policy allowed (enforced by server).</li>
<li>PriorityCap: Transfer priority allowed (enforced by server).</li>
<li>RateLock: Indicates if changing the target rate is allowed (enforced by server).</li>
<li>MinRateLock: Indicates if changing the minimum rate is allowed (enforced by server).</li>
<li>PolicyLock: Indicates if changing the transfer policy(priority) is allowed (enforced by server).</li>
<li>SessionId: Unique identifier for this session.</li>
<li>Source: The first source argument.</li>
<li>Token: Security token.</li>
<li>User: For authentication.</li>
<li>UserStr: Application-specified identifier.</li>
<li>RetryTimeout: Retry timeout in secs (specified with -o RetryTimeout option}.</li>
<li>FallbackProtocol: Alternate protocol to use in case of fasp failure.</li>
<li>XferId: Value of xfer_id tag specified by &ndash;tags</li>
<li>XferRetry: Value of xfer_retry tag specified by &ndash;tags</li>
<li>Tags: Metatags in json format specified by &ndash;tags</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: SESSION</li>
<li>Adaptive: Adaptive</li>
<li>Cookie: My data</li>
<li>Destination: C:/Temp</li>
<li>Direction: Send</li>
<li>Encryption: No</li>
<li>Host: 192.168.1.173</li>
<li>MinRate: 0</li>
<li>Operation: Transfer</li>
<li>Priority: 2</li>
<li>Port: 33001</li>
<li>Rate: 1500</li>
<li>Remote: No</li>
<li>ServiceLevel: 1000000</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>Source: C:/Temp/AsperaConnect-1.1.1.0.exe</li>
<li>Token: 8499385</li>
<li>User: Administrator</li>
<li>UserStr: 5492958869869553497</li>
<li>RetryTimeout: 60</li>
<li>FallbackProtocol: http</li>
</ul>
<h3>NOTIFICATION</h3>
<p>Sent after path MTU and bandwidth measurement (if any). Also sent when Precalc is enabled.</p>
<h4>Fields:</h4>
<ul>
<li>Type: NOTIFICATION</li>
<li>Adaptive: Transfer policy (Adaptive | Fixed | Trickle).</li>
<li>Priority: Transfer priority (1: high | 2: regular).</li>
<li>BWMeasurement: Measured bandwidth (Kbps), if any</li>
<li>MinRate: Minimum rate (Kbps).</li>
<li>PMTU: Path MTU value.</li>
<li>Rate: Target rate (Kbps).</li>
<li>SessionId: Unique identifier for this session.</li>
<li>UserStr: Application-specified identifier.</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: NOTIFICATION</li>
<li>Adaptive: Adaptive</li>
<li>BWMeasurement: 1487</li>
<li>MinRate: 0</li>
<li>PMTU: 1492</li>
<li>Priority: 2</li>
<li>Rate: 1500</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>UserStr: 5492958869869553497</li>
</ul>
<p>Sent after calculating job size (if PreCalculateJobSize flag is set)</p>
<h4>Fields:</h4>
<ul>
<li>Type: NOTIFICATION</li>
<li>Rate: Target rate (Kbps).</li>
<li>MinRate: Minimum rate (Kbps).</li>
<li>SessionId: Unique identifier for this session.</li>
<li>Adaptive: Transfer policy (Adaptive | Fixed | Trickle).</li>
<li>UserStr: Application-specified identifier.</li>
<li>PreTransferFiles: # of regular files.</li>
<li>PreTransferDirs: # of directories.</li>
<li>PreTransferSpecial: # of special files.</li>
<li>PreTransferFailed: # of files/directories with errors.</li>
<li>PreTransferBytes: total job size in bytes.</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: NOTIFICATION</li>
<li>Rate: 10000</li>
<li>MinRate: 0</li>
<li>SessionId: 15057ecd-0de8-4d4e-83df-758009780c2d</li>
<li>Adaptive: Fixed</li>
<li>PreTransferFiles: 1</li>
<li>PreTransferBytes: 104857600</li>
</ul>
<h3>STATS</h3>
<p>Periodic statistics message.</p>
<h4>Fields:</h4>
<ul>
<li>Type: STATS</li>
<li>Bytescont: Contiguous bytes at destination for this file</li>
<li>StartByte: Offset in the file where we resumed (0 if not a resume)</li>
<li>Delay: Last rtt measurement.</li>
<li>Elapsedusec: Aggregate time elapsed.</li>
<li>File: File name</li>
<li>FileBytes: Aggregate written.</li>
<li>Loss: Aggregate bytes lost.</li>
<li>SessionId: Unique identifier for this session.</li>
<li>Size: File size.</li>
<li>TransferBytes: Aggregate transferred this session.</li>
<li>UserStr: Application-specified identifier.</li>
<li>Written: File written.</li>
<li>StartByte: first byte in a file to be transferred (offset in case of resuming transfer with -k)</li>
<li>EndByte: last byte in a file to be transferred (meaningful in the context of range transfer)</li>
<li>FaspFileArgIndex: command line argument index that specified this file (if argument was a directory, many files can have the same FaspFileArgIndex). In persistent mode, argument is ever increasing.</li>
<li>FaspFileID: hash of FaspFileArgIndex, source file path, and destination file path</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: STATS</li>
<li>Bytescont: 0</li>
<li>StartByte: 0</li>
<li>Delay: 0</li>
<li>Elapsedusec: 0</li>
<li>File: AsperaConnect-1.1.1.0.exe</li>
<li>FileBytes: 0</li>
<li>Loss: 0</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>Size: 6162042</li>
<li>TransferBytes: 0</li>
<li>UserStr: 5492958869869553497</li>
<li>Written: 0</li>
<li>FaspFileArgIndex: 3</li>
<li>FaspFileID: 52361574-d28b5e4b-83877b86-97fe091a-ebe6703b</li>
</ul>
<h3>STOP</h3>
<h4>Fields:</h4>
<ul>
<li>All fields defined for STATS (above)</li>
<li>FileChecksum: Hexadecimal string of file checksum (if checksum enabled)</li>
<li>FileChecksumType: Checksum algorithm (md5 | sha1) (if checksum enabled)</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: STOP</li>
<li>StartByte: 0</li>
<li>Delay: 8</li>
<li>Elapsedusec: 15084185</li>
<li>File: AsperaConnect-1.1.1.0.exe</li>
<li>FileBytes: 5736852</li>
<li>Loss: 0</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>Size: 6162042</li>
<li>TransferBytes: 5736852</li>
<li>UserStr: 5492958869869553497</li>
<li>Written: 6162042</li>
<li>FaspFileArgIndex: 3</li>
<li>FaspFileID: 52361574-d28b5e4b-83877b86-97fe091a-ebe6703b</li>
<li>FileChecksum: 080690692698a1e3dec9924b44b94ed4</li>
<li>FileChecksumType: md5</li>
</ul>
<h3>SKIP</h3>
<p>All fields defined for STOP (above), file data not populated</p>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: SKIP</li>
<li>File: aspera.aspx</li>
<li>Size: 0</li>
<li>Loss: 0</li>
<li>Elapsedusec: 2021190</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>TransferBytes: 0</li>
<li>FileBytes: 0</li>
<li>Delay: 0</li>
</ul>
<h3>ARGSTOP</h3>
<p>All files associated with a command line source parameter (file path or directory) or a single line entry in a file-list, or a source/destination pair from a file-pair list have been processed</p>
<h4>Fields:</h4>
<ul>
<li>Type: ARGSTOP</li>
<li>File: source file or directory path</li>
<li>FaspFileArgIndex: Index associated with this source argument</li>
<li>UserStr: If specified on ascp command line</li>
<li>ArgTransfersAttempted: Count of files associated with this argument</li>
<li>ArgTransfersPassed: Count of files transferred or skipped</li>
<li>ArgTransfersSkipped: If any of the files in ArgTransfersPassed were skipped, the count of these. This field is omitted if zero.</li>
<li>ArgTransfersFailed: Count of files that had errors</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: ARGSTOP</li>
<li>File: sourcedir</li>
<li>FaspFileArgIndex: 1</li>
<li>ArgTransfersStatus: Complete</li>
<li>ArgTransfersAttempted: 2</li>
<li>ArgTransfersPassed: 2</li>
</ul>
<h3>DONE</h3>
<p>Indicates completion of the session.</p>
<h4>Fields:</h4>
<ul>
<li>Type : DONE</li>
<li>Delay: Last rtt measurement.</li>
<li>Elapsedusec: Aggregate time elapsed.</li>
<li>Loss: Aggregate bytes lost.</li>
<li>SessionId: Unique identifier for this session.</li>
<li>FileBytes: Aggregate written.</li>
<li>ArgScansAttempted: Source arguments handled.</li>
<li>ArgScansCompleted: Source arguments completed.</li>
<li>PathScansAttempted: Source paths attempted.</li>
<li>PathScansFailed: Source paths failed.</li>
<li>PathScansIrregular: Source paths pointing to irregular files (i.e. char/block devices).</li>
<li>PathScansExcluded: Source paths excluded due to matching exclude arguments.</li>
<li>DirScansCompleted: Source directory scans completed.</li>
<li>FileScansCompleted: Source file scans completed.</li>
<li>DirCreatesAttempted: Destination directory creates attempted.</li>
<li>DirCreatesFailed: Destination directory creates failed.</li>
<li>DirCreatesPassed: Destination directory already exists or successfully created.</li>
<li>TransfersAttempted: File transfers initiated.</li>
<li>TransfersFailed: File transfers with errors.</li>
<li>TransfersPassed: File transfers successfully completed or skipped.</li>
<li>TransfersSkipped: File transfers skipped (i.e. file already at the destination, overwrite policy violation etc.).</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: DONE</li>
<li>Elapsedusec: 24186433</li>
<li>FileBytes: 25332042</li>
<li>Loss: 0</li>
<li>SessionId: 03ef6778-7997-4fe1-9091-4f92ec29a806</li>
<li>TransferBytes: 25332042</li>
<li>UserStr: 5492958869869553497</li>
</ul>
<h3>FILEERROR</h3>
<p>An error occurred while transferring this file. This message is sent instead of a STOP.</p>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: FILEERROR</li>
<li>Code: 41</li>
<li>Delay: 0</li>
<li>Description: Source: Access is denied.</li>
<li>Elapsedusec: 0</li>
<li>File: C:/Temp/IE7-WindowsXP-x86-enu.exe</li>
<li>FileBytes: 0</li>
<li>Loss: 0</li>
<li>SessionId: b87c1d8c-c19d-49b3-94b1-421c243c7650</li>
<li>Size: 0</li>
<li>TransferBytes: 0</li>
<li>UserStr: 5492958869869553497</li>
<li>Written: 0</li>
<li>FaspFileArgIndex: 2</li>
<li>FaspFileID: 2a5725ee-c7f5e0c1-2f43ca0a-1aa9b1d8-00b9ec81</li>
</ul>
<h3>ERROR</h3>
<p>One or more errors occurred during the session. This message is sent instead of DONE.</p>
<p>Fields:</p><ul>
<li>Type : ERROR</li>
<li>Code : FASP error code.</li>
<li>Description : Error description.</li>
<li>Delay: Last rtt measurement.</li>
<li>Elapsedusec: Aggregate time elapsed.</li>
<li>Loss: Aggregate bytes lost.</li>
<li>SessionId: Unique identifier for this session.</li>
<li>FileBytes: Aggregate written.</li>
<li>ArgScansAttempted: Source arguments handled.</li>
<li>ArgScansCompleted: Source arguments completed.</li>
<li>PathScansAttempted: Source paths attempted.</li>
<li>PathScansFailed: Source paths failed.</li>
<li>PathScansIrregular: Source paths pointing to irregular files (i.e. char/block devices).</li>
<li>PathScansExcluded: Source paths excluded due to matching exclude arguments.</li>
<li>DirScansCompleted: Source directory scans completed.</li>
<li>FileScansCompleted: Source file scans completed.</li>
<li>DirCreatesAttempted: Destination directory creates attempted.</li>
<li>DirCreatesFailed: Destination directory creates failed.</li>
<li>DirCreatesPassed: Destination directory already exists or successfully created.</li>
<li>TransfersAttempted: File transfers initiated.</li>
<li>TransfersFailed: File transfers with errors.</li>
<li>TransfersPassed: File transfers successfully completed or skipped.</li>
<li>TransfersSkipped: File transfers skipped (i.e. file already at the destination, overwrite policy violation etc.).</li>
</ul>
<h4>Example:</h4>
<ul>
<li>FASPMGR 2</li>
<li>Type: ERROR</li>
<li>Code: 27</li>
<li>Description: One or more files failed</li>
<li>Elapsedusec: 1005642</li>
<li>Loss: 0</li>
<li>SessionId: b87c1d8c-c19d-49b3-94b1-421c243c7650</li>
<li>UserStr: 5492958869869553497</li>
</ul>
<h3>START FILE</h3>
<p>Start a file (with optional range) through mgmt (supported in &gt;=2.6).</p>
<h4>Fields:</h4>
<ul>
<li>Type : START</li>
<li>Source : Source path</li>
<li>Destination : Destination path</li>
<li>FileBytes : Optional file range [(low range):(high range)] <h4>Example:</h4>
</li>
</ul>
<ul>
<li>FASPMGR 2</li>
<li>Type: START</li>
<li>Source: /tmp/in</li>
<li>Destination: /tmp/out</li>
<li>FileBytes: 10485760:204857600</li>
</ul>
<h3>STOP FILE</h3>
<p>Stop a running file through mgmt (supported in &gt;=2.6).</p>
<h4>Fields:</h4>
<ul>
<li>TYPE : STOP</li>
<li>Source : File path to stop (as reported in a prior mgmt STAT message). <h4>Example:</h4>
</li>
</ul>
<ul>
<li>FASPMGR 2</li>
<li>Type: STOP</li>
<li>Source: /tmp/out</li>
</ul>
<h3>STOP FASP SESSION</h3>
<p>Terminate persistent fasp session.</p>
<h4>Fields:</h4>
<ul>
<li>TYPE : DONE <h4>Example:</h4>
</li>
</ul>
<ul>
<li>FASPMGR 2</li>
<li>Type: DONE </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
