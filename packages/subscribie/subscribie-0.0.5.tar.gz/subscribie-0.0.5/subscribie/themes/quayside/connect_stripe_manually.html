{% extends "layout.html" %}
{% block title %} Connect Stripe Manually {% endblock %}

{% block menu_item %}

<span class="navbar-item">
  <a href="/dashboard" class="button is-info is-inverted">
    <span class="icon">
      <i class="fas fa-home"></i>
    </span>
    <span>Dashboard</span>
  </a>
</span>

<span class="navbar-item">
  <a href="/" class="button is-info is-inverted">
    <span class="icon">
      <i class="fas fa-shopping-cart"></i>
    </span>
    <span>Back to Shop</span>
  </a>
</span>

{% endblock %}

{% block body %}

<div class="container">

<h1 class="title is-1 has-text-white is-size-1-mobile">Connect Stripe to your store </h1>

    <div class="columns">
      <div class="column">
        <div class="notification is-light"><p><b>Status: </b><i class="fas fa-circle" style="color:#6DC066"></i> {% if stripe_connected %}Stripe is already connected!{% else %}<i class="fas fa-circle" style="color:grey"></i>Stripe isn't yet configured, use the form below.{% endif %}</p></div>
        <p>To start taking one-off payments, please connect your Stripe account by copy &amp; pasting your Stripe API keys into the boxes below. You need to enter both your publishable and secret key.</p>
        <br />
        <form class="form" action="" method="POST" action="/">

            {{ form.csrf_token }}
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">Publishable Key:</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" type="text" name="publishable_key" id="publishable_key" placeholder="...">
                  </div>
                </div>
              </div>
            </div>
            <div class="field is-horizontal">
              <div class="field-label is-normal">
                <label class="label">Secret Key:</label>
              </div>
              <div class="field-body">
                <div class="field">
                  <div class="control">
                    <input class="input" type="text" name="secret_key" id="secret_key" placeholder="...">
                  </div>
                </div>
              </div>
            </div><br />
            <button type="submit" class="button is-fullwidth is-info">{% if stripe_connected %}Reconnect{% else %}Connect{% endif %} Stripe</button>
        </form>
      </div>
      <div class="is-divider-vertical"></div>
      <div class="column is-one-third" style="padding:0;">
        <img src="/static/stripe.svg" style="max-height:100px">
        <h3 class="title is-5">Need some help?</h3>
        <p>In order to link Stripe, you must already have a Stripe account created. If you do not yet have an account, <a href="https://dashboard.stripe.com/register">click here</a> to create one.<br /><br />Once logged in, on the left menu, click 'Developers' then 'API Keys'. To be able to copy the 'Secret Key' click 'Reveal Live Key Token'.</p>
        <br />
        <h3 class="title is-5">Stripe Charges</h3>
        <p>Whilst we at Subscribie do not charge per transaction, Stripe does.<br /> Their rates and more information can be found at: <a href="https://stripe.com/gb/pricing">https://stripe.com/gb/pricing</a></p>
      </div>
    </div>

  </div>
</div>


{% endblock %}
